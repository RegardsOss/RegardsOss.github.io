"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[332],{22681:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>d,metadata:()=>o,toc:()=>c});var t=s(74848),n=s(28453);const d={id:"backend-create-order-rest",title:"Create Order",sidebar_label:"Create Order",sidebar_position:1,slug:"/development/backend/services/order/guides/create-order-rest"},i=void 0,o={id:"development/services/order/api-guides/rest/backend-create-order-rest",title:"Create Order",description:"*This page assumes you know how to authenticate your REST",source:"@site/docs/development/services/order/api-guides/rest/rest-create-order.md",sourceDirName:"development/services/order/api-guides/rest",slug:"/development/backend/services/order/guides/create-order-rest",permalink:"/docs/next/development/backend/services/order/guides/create-order-rest",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/docs/development/services/order/api-guides/rest/rest-create-order.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"backend-create-order-rest",title:"Create Order",sidebar_label:"Create Order",sidebar_position:1,slug:"/development/backend/services/order/guides/create-order-rest"},sidebar:"dev",previous:{title:"Get Order progress",permalink:"/docs/next/development/backend/services/order/guides/get-order-progress-amqp"},next:{title:"Fill basket from file",permalink:"/docs/next/development/backend/services/order/guides/fill-basket-from-file"}},l={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Submit Order request",id:"submit-order-request",level:2},{value:"Request",id:"request",level:3},{value:"Response",id:"response",level:3},{value:"Examples",id:"examples",level:3}];function a(e){const r={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.p,{children:["*This page assumes you know how to ",(0,t.jsx)(r.a,{href:"/docs/next/development/backend/services/authentication/api-guides/retrieve-token-oauth2/",children:"authenticate"})," your REST\nAPI requests *"]}),"\n",(0,t.jsx)(r.p,{children:"This section describes how to order one or many products from the order service through REST interfaces."}),"\n",(0,t.jsx)(r.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsxs)(r.p,{children:["The diagram below explains the global processing of an Order request by the REGARDS system.",(0,t.jsx)(r.br,{}),"\n","For a REGARDS client using REST interface, the main steps are:"]}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:["Authenticate to REGARDS in order to retrieve a valid token. See the\n",(0,t.jsx)(r.a,{href:"/docs/next/development/backend/services/authentication/api-guides/retrieve-token-oauth2/",children:"authenticate guide"}),"."]}),"\n",(0,t.jsx)(r.li,{children:"Send an order request to REGARDS."}),"\n",(0,t.jsx)(r.li,{children:"Retrieve order status and available files."}),"\n",(0,t.jsx)(r.li,{children:"When one or more files are available(s), you can download them."}),"\n",(0,t.jsx)(r.li,{children:"Repeat the following steps until the order is complete: retrieve the order status, download available files, ..."}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.img,{alt:"sequence",src:s(33587).A+"",width:"704",height:"558"})}),"\n",(0,t.jsx)(r.h2,{id:"submit-order-request",children:"Submit Order request"}),"\n",(0,t.jsx)(r.h3,{id:"request",children:"Request"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"description"}),(0,t.jsx)(r.th,{children:"url"}),(0,t.jsx)(r.th,{children:"verb"})]})}),(0,t.jsx)(r.tbody,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Product order request"}),(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"<HOST>"}),"/api/v1/rs-order/user/orders/apply"]}),(0,t.jsx)(r.td,{children:"POST"})]})})]}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Request headers"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "Content-Type": "application/json",\n  "Authorization": "Bearer <token>"\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.code,{children:"Request body"})}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "queries": [],\n  "filters": {\n    "dataTypes": [],\n    "filenameRegExp": ""\n  },\n  "correlationId": "",\n  "user": ""\n}\n'})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Parameter"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{style:{textAlign:"center"},children:"Optional"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"queries"}),(0,t.jsx)(r.td,{children:"Lucene strings"}),(0,t.jsx)(r.td,{style:{textAlign:"center"},children:"No"}),(0,t.jsx)(r.td,{children:"List of lucene formatted queries to find products to order."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"filters.datatypes"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,t.jsxs)(r.td,{children:["List of REGARDS datatypes to filter files from ordered products. Datatypes can be ",(0,t.jsx)(r.code,{children:"RAWDATA"})," or ",(0,t.jsx)(r.code,{children:"QUICKLOOK"})]})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"filters.filenameRegExp"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,t.jsx)(r.td,{children:"Regular expression to filter files by their name from ordered products."})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"correlationId"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,t.jsx)(r.td,{children:"Order identifier"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"user"}),(0,t.jsx)(r.td,{children:"String"}),(0,t.jsx)(r.td,{style:{textAlign:"center"},children:"Yes"}),(0,t.jsx)(r.td,{children:"Ordering user login name"})]})]})]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"NOTE"}),": Here is the link to\nthe ",(0,t.jsx)(r.a,{href:"https://regardsoss.github.io/docs/development/appendices/lucene-query/",children:"REGARDS Lucene format"})]}),"\n",(0,t.jsx)(r.h3,{id:"response",children:"Response"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Http status"}),(0,t.jsx)(r.th,{children:"description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"201"}),(0,t.jsx)(r.td,{children:"Your order request is successfully created"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"403"}),(0,t.jsx)(r.td,{children:"Access denied"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"400"}),(0,t.jsx)(r.td,{children:"The order could not be created"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"422"}),(0,t.jsx)(r.td,{children:"Invalid request body"})]})]})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "orderId": 54,\n  "status": "GRANTED"\n}\n'})}),"\n",(0,t.jsx)(r.h3,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(r.p,{children:"If you want to retrieve a product by its identifier, the order request is :"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "queries": [\n    "productId:my_product_identifier"\n  ]\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"If you want to retrieve many products by their identifiers, the order request is :"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "queries": [\n    "productId:(my_product_id_1 OR my_product_id_2 OR my_product_id_3 OR my_product_id_4)"\n  ]\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"If you want to retrieve all products from a specific metadata like datatype (depends on configured REGARDS data models),\nthe order request is:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "queries": [\n    "datatype:type1"\n  ]\n}\n'})}),"\n",(0,t.jsx)(r.p,{children:"If you want to retrieve all products from a specific metadata like datatype (depends on configured REGARDS data models)\nand retrieve only image files, the order request is:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-json",children:'{\n  "queries": [\n    "datatype:type1"\n  ],\n  "filters": {\n    "dataTypes": [\n      "QUICKLOOK"\n    ]\n  }\n}\n'})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Click on the link Get Order status REST"})," just below, you will discover how to retrieve Order and availables ordered\nfiles."]})]})}function h(e={}){const{wrapper:r}={...(0,n.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},33587:(e,r,s)=>{s.d(r,{A:()=>t});const t=s.p+"assets/images/restore-request-nominal-rest-2c564884e52306ff0dacbd503063a21e.png"},28453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>o});var t=s(96540);const n={},d=t.createContext(n);function i(e){const r=t.useContext(d);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(d.Provider,{value:r},e.children)}}}]);