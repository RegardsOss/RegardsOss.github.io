"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[90579],{4027:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var i=r(74848),o=r(28453);const s={id:"backend-fem-configuration-api",title:"Feature Manager configuration API",sidebar_label:"Feature Manager configuration",slug:"/development/backend/services/fem/api/configuration/"},t=void 0,a={id:"development/backend/regards/fem/api/backend-fem-configuration-api",title:"Feature Manager configuration API",description:"Feature Manager configuration",source:"@site/versioned_docs/version-1.13.0/development/backend/regards/fem/api/feature-management-configuration.md",sourceDirName:"development/backend/regards/fem/api",slug:"/development/backend/services/fem/api/configuration/",permalink:"/docs/1.13.0/development/backend/services/fem/api/configuration/",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-1.13.0/development/backend/regards/fem/api/feature-management-configuration.md",tags:[],version:"1.13.0",frontMatter:{id:"backend-fem-configuration-api",title:"Feature Manager configuration API",sidebar_label:"Feature Manager configuration",slug:"/development/backend/services/fem/api/configuration/"},sidebar:"dev",previous:{title:"API",permalink:"/docs/1.13.0/development/backend/services/fem/api-swagger"},next:{title:"Feature Manager REST",permalink:"/docs/1.13.0/development/backend/services/fem/api/rest/"}},c={},d=[{value:"Feature Manager configuration",id:"feature-manager-configuration",level:2},{value:"Import configuration",id:"import-configuration",level:3},{value:"Request",id:"request",level:3},{value:"Response",id:"response",level:3},{value:"Example of configuration file to import",id:"example-of-configuration-file-to-import",level:4},{value:"Export configuration",id:"export-configuration",level:3},{value:"Request",id:"request-1",level:3},{value:"Response",id:"response-1",level:3},{value:"Download configuration",id:"download-configuration",level:3}];function l(e){const n={admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"feature-manager-configuration",children:"Feature Manager configuration"}),"\n",(0,i.jsx)(n.p,{children:"In order to make the configuration simple and easily adjustable, we use the import/export REST API of the microservice."}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["Be careful, import will overwrite an existing plugin configuration with same ",(0,i.jsx)(n.code,{children:"business id"}),"."]})}),"\n",(0,i.jsx)(n.h3,{id:"import-configuration",children:"Import configuration"}),"\n",(0,i.jsx)(n.h3,{id:"request",children:"Request"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"URL"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/microservice/configuration"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"URL template"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/microservice/configuration"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Method"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"POST"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Authorization:Bearer {token}"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Content-Type:multipart/form-data;charset=UTF-8; boundary=6o2knFse3p53ty9dmcQvWAIx1zInP11uCfbm"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Accept:application/json"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data params"})}),"\n",(0,i.jsxs)(n.p,{children:["Import your configuration file in multipart request using name ",(0,i.jsx)(n.code,{children:"file"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"response",children:"Response"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Code:"})," 201 CREATED"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example-of-configuration-file-to-import",children:"Example of configuration file to import"}),"\n",(0,i.jsx)(n.p,{children:"Value between brackets must be adapted!"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "microservice": "rs-fem",\n  "modules": [\n    {\n      "module": {\n        "id": "featureprovider",\n        "name": "Feature provider management module",\n        "description": "GeoJSON catalog provider",\n        "version": "1.4.0",\n        "author": "REGARDS",\n        "legalOwner": "CNES",\n        "documentation": "https://github.com/RegardsOss"\n      },\n      "configuration": [\n        {\n          "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n          "value": {\n            "pluginId": "DataTypeFeatureFactoryPlugin",\n            "label": "{My project feature factory}",\n            "businessId": "{MyProjectFeatureFactory}",\n            "priorityOrder": 0,\n            "active": true,\n            "parameters": [\n              {\n                "name": "model",\n                "type": "STRING",\n                "value": "{modelName}"\n              },\n              {\n                "name": "configDirectory",\n                "type": "STRING",\n                "value": "{/input}"\n              }\n            ]\n          }\n        }\n      ]\n    },\n    {\n      "module": {\n        "id": "feature",\n        "name": "Feature management module",\n        "description": "GeoJSON catalog manager",\n        "version": "1.4.0",\n        "author": "REGARDS",\n        "legalOwner": "CNES",\n        "documentation": "https://github.com/RegardsOss"\n      },\n      "resetBeforeImport": true,\n      "configuration": [\n        {\n          "key": "fr.cnes.regards.framework.modules.dump.domain.DumpSettings",\n          "value": {\n            "id": 0,\n            "activeModule": true,\n            "cronTrigger": "0 0 0 1-7 * SUN"\n          }\n        },\n        {\n          "key": "fr.cnes.regards.modules.feature.domain.settings.FeatureNotificationSettings",\n          "value": {\n            "id": 0,\n            "activeNotification": true\n          }\n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"export-configuration",children:"Export configuration"}),"\n",(0,i.jsx)(n.h3,{id:"request-1",children:"Request"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"URL"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/microservice/configuration"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"URL template"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/microservice/configuration"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Method"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Authorization:Bearer {token}"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Content-Type:application/json;charset=UTF-8"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Accept:application/json"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data params"})}),"\n",(0,i.jsx)(n.p,{children:"None"}),"\n",(0,i.jsx)(n.h3,{id:"response-1",children:"Response"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Code:"})," 200 OK"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Headers:"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Access-Control-Allow-Origin:*"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Access-Control-Allow-Methods:POST, PUT, GET, OPTIONS, DELETE"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Access-Control-Allow-Headers:authorization, content-type, scope"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Access-Control-Max-Age:3600"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Content-Type:application/json"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:'Content-Disposition:attachment; filename="config-Test application.json"'}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"X-Content-Type-Options:nosniff"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"X-XSS-Protection:1; mode=block"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Cache-Control:no-cache, no-store, max-age=0, must-revalidate"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Pragma:no-cache"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"Expires:0"}),(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.code,{children:"X-Frame-Options:DENY"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Content:"})}),"\n",(0,i.jsx)(n.p,{children:"Template :"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "microservice": "{microservice name}",\n  "modules": [\n    {\n      "module": {\n        "id": "{module id}",\n        "name": "{module name}",\n        "description": "{module description}",\n        "version": "{module version}",\n        "author": "{module author}",\n        "legalOwner": "{module owner}",\n        "documentation": "{module docu url}"\n      },\n      "configuration": [\n        {\n          "key": "{fully qualified class name}",\n          "value": "{json}"\n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"download-configuration",children:"Download configuration"}),"\n",(0,i.jsx)(n.p,{children:"To get configuration as a link, simply pass token in URL as follow :"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"URL"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"/microservice/configuration?token={bearer}"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Method"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"GET"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>a});var i=r(96540);const o={},s=i.createContext(o);function t(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);