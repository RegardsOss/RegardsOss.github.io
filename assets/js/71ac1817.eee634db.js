"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[94584],{37608:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>u,contentTitle:()=>d,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>o});var n=s(74848),t=s(28453);const r={id:"fem-features-dissemination",title:"Feature dissemination",slug:"/user-guide/import-data/fem/features-dissemination/"},d=void 0,a={id:"user-documentation/4_3-fem/fem-features-dissemination",title:"Feature dissemination",description:"Diffusion des produits",source:"@site/versioned_docs/version-2.2.0/user-documentation/4_3-fem/feature-dissemination.md",sourceDirName:"user-documentation/4_3-fem",slug:"/user-guide/import-data/fem/features-dissemination/",permalink:"/docs/2.2.0/user-guide/import-data/fem/features-dissemination/",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-2.2.0/user-documentation/4_3-fem/feature-dissemination.md",tags:[],version:"2.2.0",frontMatter:{id:"fem-features-dissemination",title:"Feature dissemination",slug:"/user-guide/import-data/fem/features-dissemination/"},sidebar:"manual",previous:{title:"Manage features",permalink:"/docs/2.2.0/user-guide/import-data/fem/manage-features/"},next:{title:"FEM Settings",permalink:"/docs/2.2.0/user-guide/import-data/fem/manage-features-settings/"}},u={},o=[{value:"Diffusion des produits",id:"diffusion-des-produits",level:2},{value:"Acquittement des produits",id:"acquittement-des-produits",level:2},{value:"Depuis un catalogue REGARDS",id:"depuis-un-catalogue-regards",level:3},{value:"Depuis une application externe",id:"depuis-une-application-externe",level:3}];function c(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h2,{id:"diffusion-des-produits",children:"Diffusion des produits"}),"\n",(0,n.jsx)(i.p,{children:"Le Syst\xe8me REGARDS permet de diffuser tout ou partie des produits ajout\xe9s, modifi\xe9s ou supprim\xe9s de l'archive de\nproduits GeoJson vers des syst\xe8mes externes."}),"\n",(0,n.jsxs)(i.p,{children:["Pour ce faire, un service de notification est d\xe9di\xe9 \xe0 l'envoi de messages \xe0 divers destinaires.",(0,n.jsx)(i.br,{}),"\n","Ce service permet via un ensemble de plugins de d\xe9finir :"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Le format du message \xe0 envoyer"}),"\n",(0,n.jsx)(i.li,{children:"Le moyen de diffusion du message"}),"\n",(0,n.jsx)(i.li,{children:"Les destinataires du message"}),"\n",(0,n.jsx)(i.li,{children:"Les r\xe8gles de diffusion des messages aux diff\xe9rents destinataires"}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["Pour comprendre ce fonctionnement en d\xe9tail, vous pouvez vous r\xe9f\xe9rer \xe0\nla ",(0,n.jsx)(i.a,{href:"/docs/2.2.0/development/backend/services/notifier/overview/",children:"description du service notifier"}),"."]}),"\n",(0,n.jsx)(i.h2,{id:"acquittement-des-produits",children:"Acquittement des produits"}),"\n",(0,n.jsxs)(i.p,{children:["Apr\xe8s diffusion d'un produit vers un syst\xe8me externe, le catalogue REGARDS s'attend \xe0 recevoir un message d'acquittement depuis ce syst\xe8me externe si la propri\xe9t\xe9 ",(0,n.jsx)(i.code,{children:"ackRequired"})," est \xe0 true dans la configuration de Notifier. C'est le ",(0,n.jsx)(i.strong,{children:"service de produit GeoJSON"})," qui r\xe9cup\xe8re ce message d'acquittement par AMQP et va mettre \xe0 jour l'acquittement des produits dans la base de donn\xe9es.\nIl faut diff\xe9rencier deux cas pour configurer l'acquittement :"]}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"l'acquittement s'effectue depuis un autre catalogue REGARDS"}),"\n",(0,n.jsx)(i.li,{children:"l'acquittement s'effectue depuis une application externe autre que REGARDS"}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"depuis-un-catalogue-regards",children:"Depuis un catalogue REGARDS"}),"\n",(0,n.jsxs)(i.p,{children:["Dans ce cas, l'acquittement peut \xeatre mis en place \xe0 l'aide du plugin sp\xe9cifique ",(0,n.jsx)(i.code,{children:"DisseminationAckSender"})," dans la\nconfiguration du service de notification.\nLa configuration de ce plugin est sp\xe9cifi\xe9e dans le guide des\n",(0,n.jsx)(i.a,{href:"/docs/2.2.0/development/backend/services/notifier/plugins/recipient-sender#dissemination-ack-sender",children:"Recipient sender plugins"})]}),"\n",(0,n.jsx)(i.admonition,{title:"Utilisez les bons param\xe8tres",type:"danger",children:(0,n.jsxs)(i.p,{children:["Dans le plugin, les deux param\xe8tres \xe0 remplir pour l'acquittement de features sont ",(0,n.jsx)(i.code,{children:"featureDisseminationExchange"})," et\n",(0,n.jsx)(i.code,{children:"featureDisseminationQueueName"})]})}),"\n",(0,n.jsxs)(i.p,{children:["Puisque les 2 REGARDS ont leur propre RabbitMQ, vous devez ensuite mettre en place un shovel entre les 2 REGARDS pour transf\xe9rer l'\xe9v\xe8nement d'acquittement produit et le transf\xe9rer vers\nle REGARDS o\xf9 il sera pris en compte par le catalogue \xe9metteur de la notification et ayant un produit ",(0,n.jsx)(i.strong,{children:"En attente de retour de notification"}),"."]}),"\n",(0,n.jsx)(i.h3,{id:"depuis-une-application-externe",children:"Depuis une application externe"}),"\n",(0,n.jsx)(i.p,{children:"Votre application externe doit \xeatre capable d'envoyer un message d'acquittement sur l'interface AMQP de REGARDS."}),"\n",(0,n.jsxs)(i.p,{children:["Le message \xe0 envoyer, ainsi que les informations \xe0 utiliser sont d\xe9finies dans le\nguide ",(0,n.jsx)(i.a,{href:"/docs/2.2.0/development/backend/services/fem/guides/amqp/publish-acknowledge-request",children:"Publish an acknowledge request event"})]})]})}function l(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,i,s)=>{s.d(i,{R:()=>d,x:()=>a});var n=s(96540);const t={},r=n.createContext(t);function d(e){const i=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),n.createElement(r.Provider,{value:i},e.children)}}}]);