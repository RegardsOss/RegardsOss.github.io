"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[73957],{89921:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>n,metadata:()=>d,toc:()=>a});var i=t(74848),s=t(28453);const n={id:"fill-basket-from-file",title:"Fill basket from file",sidebar_label:"Fill basket from file",sidebar_position:2,slug:"/development/backend/services/order/guides/fill-basket-from-file"},o=void 0,d={id:"development/services/order/api-guides/rest/fill-basket-from-file",title:"Fill basket from file",description:"_This page assumes you know how to authenticate your REST API",source:"@site/versioned_docs/version-2.0.0/development/services/order/api-guides/rest/fill-basket-from-file.md",sourceDirName:"development/services/order/api-guides/rest",slug:"/development/backend/services/order/guides/fill-basket-from-file",permalink:"/docs/development/backend/services/order/guides/fill-basket-from-file",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-2.0.0/development/services/order/api-guides/rest/fill-basket-from-file.md",tags:[],version:"2.0.0",sidebarPosition:2,frontMatter:{id:"fill-basket-from-file",title:"Fill basket from file",sidebar_label:"Fill basket from file",sidebar_position:2,slug:"/development/backend/services/order/guides/fill-basket-from-file"},sidebar:"dev",previous:{title:"Create Order",permalink:"/docs/development/backend/services/order/guides/create-order-rest"},next:{title:"Get Order status",permalink:"/docs/development/backend/services/order/guides/get-order-status-rest"}},l={},a=[{value:"Concept",id:"concept",level:2},{value:"File format",id:"file-format",level:2},{value:"Catalog search",id:"catalog-search",level:2},{value:"Add product returned to Basket",id:"add-product-returned-to-basket",level:2}];function c(e){const r={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.p,{children:(0,i.jsxs)(r.em,{children:["This page assumes you know how ",(0,i.jsx)(r.a,{href:"/docs/development/backend/services/authentication/api-guides",children:"to authenticate"})," your REST API\nrequests."]})}),"\n",(0,i.jsx)(r.p,{children:"This guide describes how add some products inside a basket, from a file submitted by REST API."}),"\n",(0,i.jsx)(r.admonition,{title:"Authentication required",type:"info",children:(0,i.jsx)(r.p,{children:"This feature is accessible at user-registered level, or any role with more privileges."})}),"\n",(0,i.jsxs)(r.p,{children:["You can see ",(0,i.jsx)(r.a,{href:"/docs/development/backend/services/order/api-swagger#tag/basket-controller/operation/addSelectionFromFile",children:"API documentation here"})]}),"\n",(0,i.jsx)(r.h2,{id:"concept",children:"Concept"}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:["A file containing ",(0,i.jsx)(r.strong,{children:"one provider id per line"})," is transmitted to service order by REST API"]}),"\n",(0,i.jsx)(r.li,{children:"Order service extract products identifiers from input file"}),"\n",(0,i.jsx)(r.li,{children:"Order service search using catalog service the products matching provider ids"}),"\n",(0,i.jsx)(r.li,{children:"Order service add resulting products to the current basket of the current user"}),"\n",(0,i.jsx)(r.li,{children:"The endpoint returns updated or created basket of the current user"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"file-format",children:"File format"}),"\n",(0,i.jsx)(r.p,{children:"The file is quite simple: one product identifier (provider id) per line."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-text",metastring:'title="Input file example"',children:"ProviderId00 \nSMM_CRR_AXFCNE20230903_065543_20230903_150000_20230903_150000.grb \nProviderId02 \nSGM_CRR_AXFCNE20230813_065544_20230813_170000_20230813_170000.grb \nProviderId05 \n"})}),"\n",(0,i.jsx)(r.admonition,{title:"Note that",type:"info",children:(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["The product version must not be indicated in this file. The ",(0,i.jsx)(r.strong,{children:"last"})," version of the product is always used."]}),"\n",(0,i.jsx)(r.li,{children:"Spaces after or before the identifier are automatically removed by order service."}),"\n"]})}),"\n",(0,i.jsx)(r.admonition,{title:"Number max of product identifier",type:"note",children:(0,i.jsxs)(r.p,{children:["A ",(0,i.jsx)(r.strong,{children:"maximum of provider id per file is configurable"})," at service level : ",(0,i.jsx)(r.em,{children:"property regards.order.basket.upload.\nfile.max"})," lines, with default value at 1000 ids."]})}),"\n",(0,i.jsx)(r.h2,{id:"catalog-search",children:"Catalog search"}),"\n",(0,i.jsxs)(r.p,{children:["Order service sends a search request to Catalog service, to find all products that match exactly one of the\nidentifier extracted from ",(0,i.jsx)(r.a,{href:"#file-format",children:"input file"}),". Several requests can be done because list of ids is\npartitioned to many list of 100 elements (not configurable), to avoid huge requests to elastic search."]}),"\n",(0,i.jsx)(r.admonition,{title:"Reminder",type:"info",children:(0,i.jsxs)(r.p,{children:["Order service retrieves from catalog the ",(0,i.jsx)(r.strong,{children:"last version"})," of the requested products."]})}),"\n",(0,i.jsx)(r.h2,{id:"add-product-returned-to-basket",children:"Add product returned to Basket"}),"\n",(0,i.jsxs)(r.p,{children:["The result of the ",(0,i.jsx)(r.a,{href:"#catalog-search",children:"catalog search"})," is added to the basket of the current user. If basket does not\nexist, it will be created."]}),"\n",(0,i.jsx)(r.admonition,{title:"Note that",type:"info",children:(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Product ids not found, not accessible, or not visible are ignored and are not added to basket."}),"\n",(0,i.jsx)(r.li,{children:"If no product are returned, the endpoint return http code 204 (No Content), and nothing is added to basket."}),"\n",(0,i.jsxs)(r.li,{children:["Potential errors are specified in ",(0,i.jsx)(r.a,{href:"/docs/development/backend/services/order/api-swagger#tag/basket-controller/operation/addSelectionFromFile",children:"API documentation"})]}),"\n"]})})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>o,x:()=>d});var i=t(96540);const s={},n=i.createContext(s);function o(e){const r=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(n.Provider,{value:r},e.children)}}}]);