"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[56618],{39343:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>a,frontMatter:()=>t,metadata:()=>c,toc:()=>l});var i=r(74848),s=r(28453);const t={id:"project-configuration-users-authentication-openid",title:"SSO Authentication - OpenID Connect",slug:"/user-guide/project-configuration/users/openid/"},o=void 0,c={id:"user-documentation/project-configuration/project-configuration-users-authentication-openid",title:"SSO Authentication - OpenID Connect",description:"Configuration",source:"@site/docs/user-documentation/2-project-configuration/users-authentication-openid.md",sourceDirName:"user-documentation/2-project-configuration",slug:"/user-guide/project-configuration/users/openid/",permalink:"/docs/user-guide/project-configuration/users/openid/",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/docs/user-documentation/2-project-configuration/users-authentication-openid.md",tags:[],version:"current",frontMatter:{id:"project-configuration-users-authentication-openid",title:"SSO Authentication - OpenID Connect",slug:"/user-guide/project-configuration/users/openid/"},sidebar:"manual",previous:{title:"Introduction",permalink:"/docs/user-guide/project-configuration/users/authentication/"},next:{title:"LDAP Authentication",permalink:"/docs/user-guide/project-configuration/users/ldap/"}},d={},l=[{value:"Configuration",id:"configuration",level:3},{value:"Exemple de configuration avec un serveur keycloak",id:"exemple-de-configuration-avec-un-serveur-keycloak",level:3}];function u(e){const n={code:"code",em:"em",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)("div",{align:"center",children:(0,i.jsx)("img",{src:"/images/user-documentation/v1.6/2-project-configuration/users/service-provider-openid-connect.png",alt:"OpenID Connect",width:"800"})}),"\n",(0,i.jsxs)(n.p,{children:["L'\xe9cran ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Ajouter un nouveau fournisseur de service"})})," est d\xe9coup\xe9 en deux parties :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Param\xe8tres g\xe9n\xe9raux"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Nom"})}),' est le nom choisi pour ce Service provider. Ce nom devra \xeatre r\xe9percut\xe9 dans le champs "Oauth2 redirect URI".']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Authentication URL"})})," est l'URL du formulaire de login du service d'authentification externe. L'URL doit \xeatre compl\xe8te, c'est \xe0 dire qu'elle doit inclure l'ID client, l'URL de redirection vers Regards ou autres param\xe8tres requis pas le fournisseur de service d'authentification externe."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Logout URL"})})," est l'URL du formulaire de logout du service d'authentification externe."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Param\xe8tres sp\xe9cifiques au plugin OpenID Connect"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Libill\xe9"})})," est un alias donn\xe9 \xe0 la configuration du plugin OpenID Connect cr\xe9\xe9e pour ce Service provider."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Client Id"})})," est l'identifiant client r\xe9pertoriant Regards en tant qu'utilisateur du Service provider aupr\xe8s sur fournisseur de service d'authentification externe."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Client Secret"})})," est le code secret associ\xe9 \xe0 l'identifiant client ci-dessus, d\xe9livr\xe9 par le fournisseur de service d'authentification externe."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"token endpoint URL"})})," est l'URL du endpoint HTTP du service d'authentification externe permettant de r\xe9cup\xe9rer un token Oauth2."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Oauth2 redirect URI"})})," est l'URL vers la page de redirection utilis\xe9e par le fournisseur de service externe pour renvoyer le navigateur de l'utilisateur sur Regards apr\xe8s une authentification r\xe9ussie."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"user info endpoint URL"})})," est l'URL du endpoint HTTP du service d'authentification externe permettant de r\xe9cup\xe9rer les informations de l'utilisateur connect\xe9."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Email mapping field"})})," est le nom du champs JSON pr\xe9sent dans la r\xe9ponse \xe0 un appel au endpoint \"user info\" permettant \xe0 Regards de r\xe9cup\xe9rer l'adresse email de l'utilisateur."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Firstname mapping field"})}),' est le nom du champs JSON pr\xe9sent dans la r\xe9ponse \xe0 un appel au endpoint "user info" permettant \xe0 Regards de r\xe9cup\xe9rer le pr\xe9nom de l\'utilisateur.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Lastname mapping field"})}),' est le nom du champs JSON pr\xe9sent dans la r\xe9ponse \xe0 un appel au endpoint "user info" permettant \xe0 Regards de r\xe9cup\xe9rer le nom de l\'utilisateur.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"revoke endpoint URL"})})," est l'URL du endpoint HTTP du service d'authentification externe permettant d'invalider le token Oauth2 en fin de sessions, lors d'une d\xe9connexion de l'utilisateur."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Allow insecure SSL connection"})})," permet d'autoriser l'utilisation de serveur SSO non s\xe9curis\xe9 via HTTPS. ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"Attention, l'utilisation de cette propri\xe9t\xe9 n'est pas conseill\xe9 pour un environement de production"})})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"exemple-de-configuration-avec-un-serveur-keycloak",children:"Exemple de configuration avec un serveur keycloak"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Nom"})})," : Keycloak"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Authentication URL"})})," : ",(0,i.jsx)(n.code,{children:"https://keycloak.cloud-espace.si.c-s.fr/auth/realms/main/protocol/openid-connect/auth?client_id=regards&redirect_uri=https://regards.csgroup.eu/authenticate/project/Keycloak&response_mode=fragment&response_type=code&scope=openid"}),". L'URL d'authentification contient :","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Le endpoint keycloak : ",(0,i.jsx)(n.code,{children:"https://keycloak.cloud-espace.si.c-s.fr/auth/realms/main/protocol/openid-connect/auth"})]}),"\n",(0,i.jsx)(n.li,{children:"client_id=regards : L'identifiant du client configur\xe9 sur keycloak pour permettre a REGARDS de s'authentifier sur keycloak"}),"\n",(0,i.jsxs)(n.li,{children:["redirect_uri : ",(0,i.jsx)(n.code,{children:"http://regards.csgroup.eu/authenticate/{regards project name}/{openId conf name}"}),". L'adresse de redirection apr\xe8s l'authentification. Cette adresse de rediction contient le nom du projet regards courant et le nom de la configuration openId courante"]}),"\n",(0,i.jsx)(n.li,{children:"response_mode=fragment"}),"\n",(0,i.jsx)(n.li,{children:"response_type=code"}),"\n",(0,i.jsx)(n.li,{children:"scope=openid"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Logout URL"})})," : ",(0,i.jsx)(n.code,{children:"https://keycloak.cloud-espace.si.c-s.fr/auth/realms/chronos/protocol/openid-connect/logout?post_logout_redirect_uri=https://regards.csgroup.eu/user/{regards project name}"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Libell\xe9"})})," : Keycloak"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Client id"})}),": regards"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Client secret"})}),": ****"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Token endpoint"})})," : ",(0,i.jsx)(n.code,{children:"https://keycloak.cloud-espace.si.c-s.fr/auth/realms/main/protocol/openid-connect/token"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Oauth2 redirect uri"})})," : ",(0,i.jsx)(n.code,{children:"https://regards.csgroup.eu/authenticate/{regards project name}/{openId conf name}>"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"User info endpoint"})})," : ",(0,i.jsx)(n.code,{children:"https://keycloak.cloud-espace.si.c-s.fr/auth/realms/chronos/protocol/openid-connect/userinfo"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"email mapping field"})})," : email"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"revoke endpoint"})})," : ",(0,i.jsx)(n.code,{children:"https://keycloak.cloud-espace.si.c-s.fr/auth/realms/chronos/protocol/openid-connect/revoke"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Allow insecure"})})," : false"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var i=r(96540);const s={},t=i.createContext(s);function o(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);