"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[85075],{76693:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var r=s(74848),t=s(28453);const i={id:"appendices-lucene-query",title:"Lucene query format",sidebar_label:"Lucene query format",slug:"/development/appendices/lucene-query/"},a=void 0,o={id:"development/appendices/appendices-lucene-query",title:"Lucene query format",description:"In order to search into REGARDS catalog the standard API allows you to use a lucene query parser.",source:"@site/docs/development/appendices/02-create-lucene-query.md",sourceDirName:"development/appendices",slug:"/development/appendices/lucene-query/",permalink:"/docs/development/appendices/lucene-query/",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/docs/development/appendices/02-create-lucene-query.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{id:"appendices-lucene-query",title:"Lucene query format",sidebar_label:"Lucene query format",slug:"/development/appendices/lucene-query/"},sidebar:"dev",previous:{title:"REGARDS OAIS",permalink:"/docs/development/appendices/oais/"},next:{title:"REGARDS XML Models format",permalink:"/docs/development/appendices/create-model/"}},c={},d=[{value:"String searches",id:"string-searches",level:3},{value:"Fields",id:"fields",level:3},{value:"Exclude Searches",id:"exclude-searches",level:3},{value:"Range Searches",id:"range-searches",level:3},{value:"Number",id:"number",level:4},{value:"Date",id:"date",level:4},{value:"Boolean operators",id:"boolean-operators",level:3},{value:"OR",id:"or",level:4},{value:"AND",id:"and",level:4},{value:"Escaping special characters",id:"escaping-special-characters",level:3},{value:"Testing existence",id:"testing-existence",level:3}];function l(e){const n={admonition:"admonition",br:"br",code:"code",h3:"h3",h4:"h4",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["In order to search into REGARDS catalog the standard API allows you to use a lucene query parser.\nTo do so, the ",(0,r.jsx)(n.code,{children:"q"})," query parameter value is parsed with Lucene standard query parser as describe here under."]}),"\n",(0,r.jsx)(n.h3,{id:"string-searches",children:"String searches"}),"\n",(0,r.jsx)(n.p,{children:'Lucene is only used for syntax. Value semantic is interpreted thanks to wildcard expressions except for " character. To\ndo exact searches, you have to put " around your value otherwise it will be considered a regular expression.'}),"\n",(0,r.jsx)(n.p,{children:"To use regular expressions you need to wrap your search between '/' caracters as the exemple query here under"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"name:/Jhon [a-zA-Z]/"})}),"\n",(0,r.jsx)(n.h3,{id:"fields",children:"Fields"}),"\n",(0,r.jsx)(n.p,{children:"When performing a search you must specify a field (See section parameters above for available fields)."}),"\n",(0,r.jsx)(n.p,{children:'You search to a field by typing the field name followed by a colon ":" and then the term you are looking for.'}),"\n",(0,r.jsx)(n.p,{children:'For example, if you want to find the document entitled "The Right Way" which contains the text "don\'t go this way", you\nshould enter:'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:'title:"The Right Way" AND text:go'})}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:"Available fields correspond to :"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"data model attributes"})," (possibly prefixed with ",(0,r.jsx)(n.code,{children:"properties."})," to avoid potential conflicts)"]}),"\n",(0,r.jsxs)(n.li,{children:["common attributes ",(0,r.jsx)(n.code,{children:"id"}),", ",(0,r.jsx)(n.code,{children:"label"}),", ",(0,r.jsx)(n.code,{children:"providerId"}),", ",(0,r.jsx)(n.code,{children:"model"}),", ",(0,r.jsx)(n.code,{children:"tags"})]}),"\n",(0,r.jsxs)(n.li,{children:["geospatial parameters : ",(0,r.jsx)(n.code,{children:"g"})," for WKT search or ",(0,r.jsx)(n.code,{children:"lon"}),", ",(0,r.jsx)(n.code,{children:"lat"}),", ",(0,r.jsx)(n.code,{children:"r"})," for circle search"]}),"\n"]})]}),"\n",(0,r.jsx)(n.h3,{id:"exclude-searches",children:"Exclude Searches"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:'NOT "Test"'})," or ",(0,r.jsx)(n.code,{children:'label:(NOT "test")'})]}),"\n",(0,r.jsx)(n.h3,{id:"range-searches",children:"Range Searches"}),"\n",(0,r.jsx)(n.p,{children:"Range Queries allow one to match items whose field(s) values are between the lower and upper bound specified by the\nRange Query."}),"\n",(0,r.jsxs)(n.p,{children:['Range Queries can be inclusive or exclusive of the upper and lower bounds. Inclusive range queries are denoted by square\nbrackets ("[" and "]"). Exclusive range queries are denoted by curly brackets ("'," and ",'").']}),"\n",(0,r.jsx)(n.h4,{id:"number",children:"Number"}),"\n",(0,r.jsx)(n.p,{children:"The API support range searches on numbers. According to the expected model's attribute type, the value will be parsed as\nan integer, a double, a long or a float."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"altitude:{0 TO 2000}"})}),"\n",(0,r.jsx)(n.p,{children:"This will find all items whose altitude attribute are between 0 and 2000, but not including 0 and 2000."}),"\n",(0,r.jsx)(n.h4,{id:"date",children:"Date"}),"\n",(0,r.jsx)(n.p,{children:"The API supports range searches on dates. The expected date format is a date-time without a time-zone in the ISO-8601\ncalendar system, such as 2007-12-03T10:15:30."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"date:[2007-12-03T10:15:30 TO 2007-12-03T11:15:30]"})}),"\n",(0,r.jsx)(n.p,{children:"This will find items whose date fields have values between 03/12/2007 at 10:15:30 and 03/12/2007 at 11:15:30, inclusive."}),"\n",(0,r.jsx)(n.h3,{id:"boolean-operators",children:"Boolean operators"}),"\n",(0,r.jsx)(n.p,{children:"Boolean operators allow terms to be combined through logic operators."}),"\n",(0,r.jsx)(n.h4,{id:"or",children:"OR"}),"\n",(0,r.jsxs)(n.p,{children:["The OR operator is the default conjunction operator. This means that if there is no Boolean operator between two terms,\nthe OR operator is used. The OR operator links two terms and finds a matching document if either of the terms exist in a\ndocument. This is equivalent to a union using sets. The symbol ",(0,r.jsx)(n.code,{children:"||"})," can be used in place of the word OR."]}),"\n",(0,r.jsx)(n.p,{children:'To search for items which title contain either "uranus" or "neptune" use the query:'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"title:uranus OR title:neptune"})}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"title:(uranus OR neptune)"})}),"\n",(0,r.jsx)(n.h4,{id:"and",children:"AND"}),"\n",(0,r.jsxs)(n.p,{children:["The AND operator matches items where both terms exist anywhere in the text of a single document. This is equivalent to\nan intersection using sets. The symbol ",(0,r.jsx)(n.code,{children:"&&"})," can be used in place of the word AND."]}),"\n",(0,r.jsx)(n.p,{children:'To search for items which title contain "uranus" and which author is "neptune" use the query:'}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:'title:"uranus" AND author:"neptune"'})}),"\n",(0,r.jsx)(n.h3,{id:"escaping-special-characters",children:"Escaping special characters"}),"\n",(0,r.jsx)(n.p,{children:"The API supports escaping special characters that are part of the query syntax. The current list special characters\nare :"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:'+ - && || ! ( ) { } [ ] ^ " ~ * ? : \\ /'})}),"\n",(0,r.jsx)(n.p,{children:"To escape these character use the \\ before the character. For example to search for (1+1):2 use the query:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"\\(1\\+1\\)\\:2"})}),"\n",(0,r.jsx)(n.h3,{id:"testing-existence",children:"Testing existence"}),"\n",(0,r.jsxs)(n.p,{children:["In order to test if a field exists, you can use ",(0,r.jsx)(n.code,{children:"/.*/"}),". For exemple:",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"title:/.*/"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var r=s(96540);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);