"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[3854],{55628:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var t=i(74848),s=i(28453);const r={id:"recipient-sender-notifier-plugins",title:"Recipient sender plugins",sidebar_label:"Recipient sender plugins",slug:"/development/backend/services/notifier/plugins/recipient-sender"},d=void 0,l={id:"development/backend/regards/notifier/plugins/recipient-sender-notifier-plugins",title:"Recipient sender plugins",description:"This guide introduces you how to configure Recipient sender plugins.",source:"@site/versioned_docs/version-1.15/development/backend/regards/notifier/plugins/recipient-sender-plugins.md",sourceDirName:"development/backend/regards/notifier/plugins",slug:"/development/backend/services/notifier/plugins/recipient-sender",permalink:"/docs/1.15/development/backend/services/notifier/plugins/recipient-sender",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-1.15/development/backend/regards/notifier/plugins/recipient-sender-plugins.md",tags:[],version:"1.15",frontMatter:{id:"recipient-sender-notifier-plugins",title:"Recipient sender plugins",sidebar_label:"Recipient sender plugins",slug:"/development/backend/services/notifier/plugins/recipient-sender"},sidebar:"dev",previous:{title:"Overview",permalink:"/docs/1.15/development/backend/services/notifier/plugins/intro"},next:{title:"Rule matcher plugins",permalink:"/docs/1.15/development/backend/services/notifier/plugins/rule-matcher"}},a={},o=[{value:"Common Sender configuration",id:"common-sender-configuration",level:2},{value:"Plugin implementation",id:"plugin-implementation",level:2},{value:"RabbitMQSender",id:"rabbitmqsender",level:3},{value:"LTA Request Sender",id:"lta-request-sender",level:3},{value:"Worker Manager Sender",id:"worker-manager-sender",level:3},{value:"Dissemination ACK Sender",id:"dissemination-ack-sender",level:3},{value:"GeoJSON FEM catalog usage",id:"geojson-fem-catalog-usage",level:4},{value:"OAIS catalog usage",id:"oais-catalog-usage",level:4}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["This guide introduces you how to configure Recipient sender plugins.",(0,t.jsx)(n.br,{}),"\n","These plugins allow to generate a payload, using product content and metadata, and send it to another system named\n",(0,t.jsx)(n.strong,{children:"recipient"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Here is the list of documented plugins:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"#rabbitmqsender",children:"RabbitMQSender plugin"})," allows to send payload to an RabbitMQ exchange, with no transformation\napplied to the input"]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#lta-request-sender",children:"LTA Request Sender"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#worker-manager-sender",children:"Worker Manager Sender"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#dissemination-ack-sender",children:"Dissemination ACK Sender"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:["To import your plugin configurations to Notifier, you\nneed ",(0,t.jsx)(n.a,{href:"/docs/1.15/development/backend/notifier/guides/rest/import-plugin-configuration",children:"update microservice configuration using REST API"})]})}),"\n",(0,t.jsx)(n.h2,{id:"common-sender-configuration",children:"Common Sender configuration"}),"\n",(0,t.jsx)(n.admonition,{title:"Abstract class extension",type:"info",children:(0,t.jsxs)(n.p,{children:["Most of REGARDS OSS Plugins sender are extending\nthe ",(0,t.jsx)(n.a,{href:"https://github.com/RegardsOss/regards-plugins/blob/master/notifier-plugins/common-plugins/src/main/java/fr/cnes/regards/common/notifier/plugins/AbstractRabbitMQSender.java",children:"AbstractRabbitMQSender"}),"\nabstract class.",(0,t.jsx)(n.br,{}),"\n","This abstraction above plugins implementation provides a common configuration to manage a plugin that sends event to\nRabbitMQ exchange."]})}),"\n",(0,t.jsx)(n.p,{children:"Configuration parameters are:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default Value"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"recipientLabel"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["External service identifier we want to notify the products to - this information is sent back to the emitter that contacted Notifier",(0,t.jsx)("br",{})," When not specified, the emitter wont know what's the recipient label that received its events"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"description"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsx)(n.td,{children:"Recipient plugin description displayed in the REGARDS HMI"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"exchange"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{style:{textAlign:"center"}}),(0,t.jsx)(n.td,{children:"RabbitMQ exchange name to publish message to"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"queueName"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsx)(n.td,{children:"RabbitMQ queue name to initialize"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"queueDeadLetterRoutingKey"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsx)(n.td,{children:"RabbitMQ dead letter routing key on the queue"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"directNotificationEnabled"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["When ",(0,t.jsx)(n.code,{children:"true"}),", indicates this plugin can be used to send to the recipient directly without checking product content against Rule matcher plugins"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"blockingRequired"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["When ",(0,t.jsx)(n.code,{children:"true"}),", the sender will be informed that the notified resource must be blocked until the sender receives acknowledge from the recipient. Only then, the notified resource can be unlocked."]})]})]})]}),"\n",(0,t.jsx)(n.admonition,{title:"Why providing RabbitMQ Queue and DLX?",type:"info",children:(0,t.jsx)(n.p,{children:"This plugin creates a queue linked to the exchange, to ensure no message will be lost before the subscriber creates\nits queue."})}),"\n",(0,t.jsx)(n.p,{children:"This abstract class defines following default behavior:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ackRequired"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{children:"The emitter that contacted Notifier won't receive any acknowledgement from this notification"})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"plugin-implementation",children:"Plugin implementation"}),"\n",(0,t.jsx)(n.h3,{id:"rabbitmqsender",children:"RabbitMQSender"}),"\n",(0,t.jsxs)(n.p,{children:["This plugin is used to send notifications to a specific RabbitMQ exchange with no transformation applied to the\ninput (what Notifier received).",(0,t.jsx)(n.br,{}),"\n","This plugin let you override following configuration:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default Value"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsx)(n.tbody,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ackRequired"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"false"})}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["When ",(0,t.jsx)(n.code,{children:"true"}),", the emitter that contacted Notifier will be awaiting for an acknowledgement message"]})]})})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:"title='RabbitMqSender plugin configuration example'",children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "RabbitMQSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "{exchange name to use}"\n      },\n      {\n        "name": "queueName",\n        "type": "STRING",\n        "value": "{queue name to use}"\n      },\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "{identifier of the recipient}"\n      },\n      {\n        "name": "ackRequired",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "description",\n        "type": "STRING",\n        "value": "{plugin description}"\n      },\n      {\n        "name": "directNotificationEnabled",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "blockingRequired",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"lta-request-sender",children:"LTA Request Sender"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"There is no public documentation yet"})}),"\n",(0,t.jsx)(n.h3,{id:"worker-manager-sender",children:"Worker Manager Sender"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"There is no public documentation yet"})}),"\n",(0,t.jsx)(n.h3,{id:"dissemination-ack-sender",children:"Dissemination ACK Sender"}),"\n",(0,t.jsx)(n.p,{children:"This plugin is designed to send acknowledge messages to OAIS catalog and FEM catalog."}),"\n",(0,t.jsx)(n.admonition,{type:"danger",children:(0,t.jsx)(n.p,{children:"You need to define either properties to send to FEM catalog either properties to send to OAIS catalog"})}),"\n",(0,t.jsx)(n.h4,{id:"geojson-fem-catalog-usage",children:"GeoJSON FEM catalog usage"}),"\n",(0,t.jsx)(n.p,{children:"This plugin let you override following configuration:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"featureDisseminationExchange"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["Name of the AMQP exchange to store messages before shovel. ",(0,t.jsx)("br",{})," ",(0,t.jsx)(n.strong,{children:"Only use when handling GeoJSON products."})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"featureDisseminationQueueName"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["Name of the AMQP queue to store messages before shovel. ",(0,t.jsx)("br",{})," ",(0,t.jsx)(n.strong,{children:"Only use when handling GeoJSON products."})]})]})]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:'title="FEM catalog DisseminationAckSender example"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "DisseminationAckSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "{exchange name to use}"\n      },\n      {\n        "name": "queueName",\n        "type": "STRING",\n        "value": "{queue name to use}"\n      },\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "{identifier of the recipient}"\n      },\n      {\n        "name": "description",\n        "type": "STRING",\n        "value": "{plugin description}"\n      },\n      {\n        "name": "directNotificationEnabled",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "featureDisseminationExchange",\n        "type": "STRING",\n        "value": "{exchange name to store ACK messages before shovel}"\n      },\n      {\n        "name": "featureDisseminationQueueName",\n        "type": "STRING",\n        "value": "{queue name to store ACK messages before shovel}"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"oais-catalog-usage",children:"OAIS catalog usage"}),"\n",(0,t.jsx)(n.p,{children:"This plugin let you override following configuration:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Name"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"aipDisseminationExchange"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["Name of the exchange to store messages before shovel. ",(0,t.jsx)("br",{})," ",(0,t.jsx)(n.strong,{children:"Only use when handling OAIS products."})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"aipDisseminationQueueName"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,t.jsxs)(n.td,{children:["Name of the AMQP queue to store messages before shovel. ",(0,t.jsx)("br",{})," ",(0,t.jsx)(n.strong,{children:"Only use when handling OAIS products."})]})]})]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",metastring:'title="Example de configuration de plugin pour acquitter une diffusion de produits OAIS"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "DisseminationAckSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "{exchange name to use}"\n      },\n      {\n        "name": "queueName",\n        "type": "STRING",\n        "value": "{queue name to use}"\n      },\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "{identifier of the recipient}"\n      },\n      {\n        "name": "description",\n        "type": "STRING",\n        "value": "{plugin description}"\n      },\n      {\n        "name": "directNotificationEnabled",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "aipDisseminationExchange",\n        "type": "STRING",\n        "value": "{exchange name to store ACK messages before shovel}"\n      },\n      {\n        "name": "aipDisseminationQueueName",\n        "type": "STRING",\n        "value": "{queue name to store ACK messages before shovel}"\n      }\n    ]\n  }\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var t=i(96540);const s={},r=t.createContext(s);function d(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);