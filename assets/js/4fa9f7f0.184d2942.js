"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[67864],{41560:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var o=t(74848),l=t(28453);const s={id:"frontend-view-theme",title:"Material and module themes",sidebar_label:"Theme",slug:"/development/frontend/view/theme/"},i=void 0,r={id:"development/frontend/components/frontend-view-theme",title:"Material and module themes",description:"Description",source:"@site/docs/development/frontend/components/theme.md",sourceDirName:"development/frontend/components",slug:"/development/frontend/view/theme/",permalink:"/docs/development/frontend/view/theme/",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/docs/development/frontend/components/theme.md",tags:[],version:"current",frontMatter:{id:"frontend-view-theme",title:"Material and module themes",sidebar_label:"Theme",slug:"/development/frontend/view/theme/"},sidebar:"dev",previous:{title:"Internationalization",permalink:"/docs/development/frontend/view/international/"},next:{title:"Forms",permalink:"/docs/development/frontend/view/forms/"}},d={},c=[{value:"Description",id:"description",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"How to",id:"how-to",level:2},{value:"Get properties from the MUI and module themes context",id:"get-properties-from-the-mui-and-module-themes-context",level:3},{value:"Connect with Material UI theme context",id:"connect-with-material-ui-theme-context",level:3},{value:"Connect with MUI and module theme",id:"connect-with-mui-and-module-theme",level:3},{value:"1. Declare style builder",id:"1-declare-style-builder",level:3},{value:"2. Connect component to module theme provider",id:"2-connect-component-to-module-theme-provider",level:3},{value:"2.a Using ModuleStyleProvider",id:"2a-using-modulestyleprovider",level:4},{value:"2.b Using withModuleStyle",id:"2b-using-withmodulestyle",level:4},{value:"3. Add context type",id:"3-add-context-type",level:3}];function a(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"@regards/theme"})," (web_modules/utils/theme) projects holds components and tools designed to simplify the use of global ",(0,o.jsx)(n.a,{href:"http://www.material-ui.com/#/customization/themes",children:"Material-ui"})," theme - called MUI theme in the next lines - over all REGARDS frontend react components. MUI theme holds a dictionnary of variables, sorted by categories, defining styles like:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"padding"}),"\n",(0,o.jsx)(n.li,{children:"margin"}),"\n",(0,o.jsx)(n.li,{children:"borders"}),"\n",(0,o.jsx)(n.li,{children:"colors"}),"\n",(0,o.jsx)(n.li,{children:"and so on..."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Beside MUI theme, some of the ",(0,o.jsx)(n.code,{children:"regards/theme"})," components also provides a connector with ",(0,o.jsx)(n.code,{children:"module theme"})," context. The context corresponds to specific variables built by a theme builder function for a component or a group of components."]}),"\n",(0,o.jsx)(n.p,{children:"Both MUI and module themes context will be detailed in following sections."}),"\n",(0,o.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,o.jsx)(n.p,{children:"To use the REGARDS theme components and tools you must add the here under package to your package.json dependencies:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"@regardsoss/theme"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"how-to",children:"How to"}),"\n",(0,o.jsx)(n.h3,{id:"get-properties-from-the-mui-and-module-themes-context",children:"Get properties from the MUI and module themes context"}),"\n",(0,o.jsxs)(n.p,{children:["In components ",(0,o.jsx)(n.strong,{children:"with theme context"})," (see later sections), you can retrieve theme properties in:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"this.context.muiTheme"}),": That object holds Material UI theme categories, palette, card, and so on. Please refer to Material UI official documentation for more details about that object."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"this.context.moduleTheme"}),": That object holds module theme, as exported by the theme builder function."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["In order to access those context elements, the component must declare the ",(0,o.jsx)(n.code,{children:"themeContextType"})," in ",(0,o.jsx)(n.code,{children:"contextTypes"}),", as shown in example below."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"import { themeContextType } from '@regardsoss/theme'\n\nexport class ExampleComponent extends React.Component {\n\n  static contextTypes = {\n      ...themeContextType,\n  }\n\n  render() {\n    const mainColor = this.context.muiTheme.palette.priamy1Color\n    const someModuleStyle = this.context.moduleTheme.aValue\n    ...\n  }\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"connect-with-material-ui-theme-context",children:"Connect with Material UI theme context"}),"\n",(0,o.jsxs)(n.p,{children:["In REGARDS, the MUI theme context can be provided to children by using ",(0,o.jsx)(n.strong,{children:"ThemeProvider"})," component like demonstrated in following exmaple. Please note that this connector adds only MUI theme context, not the module theme."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"import { ThemeProvider } from '@regardsoss/theme'\n\nexport class ExampleContainer extends React.Component {\n\n  render() {\n    return (\n      <ThemeProvider>\n        <ExampleComponent />\n      </ThemeProvider>\n    )\n  }\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In the previous example, ExampleComponent will be able to access the MUI theme variables through context ",(0,o.jsx)(n.em,{children:"but ExampleContainer will not"}),". Indeed context is defined for ",(0,o.jsx)(n.strong,{children:"ThemeProvider children"}),", in the React meaning."]}),"\n",(0,o.jsx)(n.p,{children:"Note: Most of the time, REGARDS developer doesn't need to use the ThemeProvider, as MUI Theme context is provided in all REGARDS applications."}),"\n",(0,o.jsx)(n.h3,{id:"connect-with-mui-and-module-theme",children:"Connect with MUI and module theme"}),"\n",(0,o.jsxs)(n.p,{children:["As explained before in this page, REGARDS allows a component or a group of components to define custom styles, called ",(0,o.jsx)(n.code,{children:"module styles"}),", through a style builder function. The developer should follow the next steps to define and access such theme in components."]}),"\n",(0,o.jsx)(n.h3,{id:"1-declare-style-builder",children:"1. Declare style builder"}),"\n",(0,o.jsx)(n.p,{children:"The style builder function produces a javascript object based on MUI theme as parameter. Such object must be structured to match component(s) needs at render time. By convention in REGARDS, style builder functions are placed in styles.js files."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// content of styles.js\n\n/**\n * Builds module style on theme\n */\nexport default theme => ({ // MUI theme is provided as function parameter, to access MUI colors and such...\n  myCustomPane: {\n    color: theme.palette.textColor,\n  }\n  // ...\n})\n"})}),"\n",(0,o.jsxs)(n.p,{children:["When dealing with styles, we also declare frequently an index.js file, that only exports the style builder function in an object like ",(0,o.jsx)(n.code,{children:"{ style: styleBuilderFunction }"}),". That makes it easier to instantiate context later on."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// content of index.js\nimport styles from './styles'\n\nmodule.exports = { styles }\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"2-connect-component-to-module-theme-provider",children:"2. Connect component to module theme provider"}),"\n",(0,o.jsx)(n.p,{children:"In REGARDS, the MUI and module theme contexts can be provided to children by using either:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ModuleStyleProvider"})," component"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"withModuleStyle"})," decorator function"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Those two methods are detailed in sections below."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsxs)(n.em,{children:["Note: Theme connectors also define an optional parameter/property called ",(0,o.jsx)(n.code,{children:"stackCallingContext"})," (false by default). That property, when true, indicates that the new context and parent context should be merged. It results in providing both parent and new context themes to children. When exploring REGARDS code, that method is frequently encountered, especially in common components, as it allows the calling component defining children using calling context themes while API components still access themes in their own context."]})}),"\n",(0,o.jsx)(n.h4,{id:"2a-using-modulestyleprovider",children:"2.a Using ModuleStyleProvider"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ModuleStyleProvider"})," component provides MUI module themes context to its React children, as demonstrated in example below.\nIt defines the following properties:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"module"}),": an object with a single field ",(0,o.jsx)(n.code,{children:"styles"}),", holding the style builder function."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"stackCallingContext"}),": an optional boolean, false by default. See note in parent section for more detail."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"  import { ModuleStyleProvider } from '@regardsoss/theme'\n  import ExampleComponent from './ExampleComponent'\n  import moduleStyles from '../../styles' // assuming there is an index.js\n\n  export class ExampleContainer extends React.Component {\n\n    render() {\n      return (\n        <ModuleStyleProvider module={moduleStyles}>\n          <ExampleComponent />\n        </ModuleStyleProvider>)\n    }\n  }\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In the previous example, ExampleComponent will be able to access muiTheme and moduleTheme through context ",(0,o.jsx)(n.em,{children:"but ExampleContainer will not"}),". Indeed context is defined for ",(0,o.jsx)(n.strong,{children:"ModuleStyleProvider children"}),", in the React meaning."]}),"\n",(0,o.jsx)(n.p,{children:"For instance, in the following React tree, B and C can access themes through context, but A can not."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"<A>\n  <ModuleStyleProvider module={moduleStyles}>\n      <B>\n        <C />\n      </B>\n  </ModuleStyleProvider>\n</A>\n"})}),"\n",(0,o.jsx)(n.h4,{id:"2b-using-withmodulestyle",children:"2.b Using withModuleStyle"}),"\n",(0,o.jsx)(n.p,{children:"To use the REGARDS withModuleStyle decorator method, you need to export the component decorated with that method. It defines the following parameters (matching with ModuleStyleProvider properties described before):"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"module"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"stackCallingContext"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Example:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"import { withModuleStyle } from '@regardsoss/theme'\nimport moduleStyles from '../../styles' // assuming there is an index.js\n\nclass ExampleContainer extends React.Component {\n\n  render() {\n    // ...\n  }\n}\n\nexport withModuleStyle(moduleStyles)(ExampleContainer)\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The use of ",(0,o.jsx)(n.code,{children:"withModuleStyle(moduleStyles)(ExampleContainer)"})," means that module theme context will be defined for ExampleContainer and all its children. Therefore, if we define the ",(0,o.jsx)(n.code,{children:"contextTypes"})," in this container, it will be able accessing the module theme through its context."]}),"\n",(0,o.jsx)(n.h3,{id:"3-add-context-type",children:"3. Add context type"}),"\n",(0,o.jsx)(n.p,{children:"Finally, theme context can be used in container children, and in container itself when withModuleStyle decorator method was used. To access it, as seen in first 'how to' section, the developer has to declare context types, like in example below."}),"\n",(0,o.jsx)(n.p,{children:"Example: a component declaring and consuming theme context:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"import { withModuleStyle } from '@regardsoss/theme'\nimport moduleStyles from '../../styles' // assuming there is an index.js\n\nclass CompleteExample extends React.Component {\n\n  static contextTypes = {\n      ...themeContextType,\n  }\n\n  render() {\n    const { moduleTheme, muiTheme } = this.context\n    const styleFromTheme = { color: muiTheme.palette.textColor }\n    return (\n      <div>\n        <div style={styleFromTheme}>Using MUI theme color </div>\n        { /* \n        we suppose here that style builder returned something like \n        { completeExample: { border: '1px solid red', ...} } \n        */ }\n        <div style={moduleTheme.completeExample.style}>Using some module theme </div>\n      </div>\n    )\n    // ...\n  }\n}\n\nexport withModuleStyle(moduleStyles)(CompleteExample)\n"})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var o=t(96540);const l={},s=o.createContext(l);function i(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);