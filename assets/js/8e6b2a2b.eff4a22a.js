"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[15605],{81809:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var a=n(74848),r=n(28453);const s={title:"Configuration Importation/Exportation",sidebar_label:"Importation/Exportation",slug:"/development/backend/services/lta-manager/configuration/import-export",sidebar_position:1},i=void 0,o={id:"development/services/lta-manager/configuration/lta-manager-import-export",title:"Configuration Importation/Exportation",description:"Microservices settings regroup a set of settings that are specific",source:"@site/docs/development/services/lta-manager/configuration/lta-manager-import-export.md",sourceDirName:"development/services/lta-manager/configuration",slug:"/development/backend/services/lta-manager/configuration/import-export",permalink:"/docs/next/development/backend/services/lta-manager/configuration/import-export",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/docs/development/services/lta-manager/configuration/lta-manager-import-export.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Configuration Importation/Exportation",sidebar_label:"Importation/Exportation",slug:"/development/backend/services/lta-manager/configuration/import-export",sidebar_position:1},sidebar:"dev",previous:{title:"All endpoints (OpenAPI)",permalink:"/docs/next/development/backend/services/lta-manager/api-swagger"},next:{title:"Static configuration",permalink:"/docs/next/development/backend/services/lta-manager/configuration/static-configuration"}},c={},d=[{value:"Import/Export API",id:"importexport-api",level:2},{value:"Configurable parameters",id:"configurable-parameters",level:2},{value:"Example",id:"example",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["Microservices settings regroup a set of settings that are specific\nby ",(0,a.jsx)(t.a,{href:"/docs/next/development/concepts/multitenant/",children:"tenant"})," and stored in the microservice database."]}),"\n",(0,a.jsx)(t.h2,{id:"importexport-api",children:"Import/Export API"}),"\n",(0,a.jsxs)(t.p,{children:["To configure ",(0,a.jsx)(t.code,{children:"rs-lta-manager"})," settings for a specific tenant, you need to follow the ",(0,a.jsx)(t.a,{href:"/docs/next/development/services/common/common-import-export-configuration",children:"generic Import/Export service\nconfiguration guide"}),", it will help you understand the expected JSON\nfile payload that you can send to the\n",(0,a.jsx)(t.a,{href:"/docs/next/development/backend/services/lta-manager/api-swagger#tag/module-manager-controller/operation/importConfiguration",children:"import configuration endpoint"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["This configuration can also be imported or exported\nthrough ",(0,a.jsx)(t.a,{href:"/docs/next/user-guide/project-configuration/microservices/",children:"administrator UI"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"configurable-parameters",children:"Configurable parameters"}),"\n",(0,a.jsxs)(t.p,{children:["Dynamic settings for ",(0,a.jsx)(t.code,{children:"rs-lta-manager"})," microservice are :"]}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Name"}),(0,a.jsx)(t.th,{children:"Type"}),(0,a.jsx)(t.th,{children:"Default Value"}),(0,a.jsx)(t.th,{children:"Description"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"success_expiration_in_hours"}),(0,a.jsx)(t.td,{children:"Integer"}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"24"})}),(0,a.jsxs)(t.td,{children:["The lifetime of successful requests in hours.",(0,a.jsx)("br",{})," After a successfull LTA requests submission, REGARDS keeps requests in database. This setting precise how long these sucessfull request are kept before be permanently deleted. Only LTA request are deleted. OAIS product created stay alive as long as they are not deleted from OAIS service (See Ingest microservice)"]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"storage"}),(0,a.jsx)(t.td,{children:"String"}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"LTA"})}),(0,a.jsxs)(t.td,{children:["The storage location name. ",(0,a.jsx)("br",{}),"Storage location is add to all generated OAIS requests, to specify where files has to be stored. This location can exists in storage service (See Storage microservice), or virtual storage (See Ingest microservice)"]})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:"datatypes"}),(0,a.jsx)(t.td,{children:(0,a.jsx)(t.code,{children:"Map<String, DatatypeParameter>"})}),(0,a.jsxs)(t.td,{children:[(0,a.jsx)(t.code,{children:"{}"})," (empty map)"]}),(0,a.jsxs)(t.td,{children:["The datatype of incoming requests description.",(0,a.jsx)("br",{})," Associate a datatype (a simple label) to a storage path (path inside storage configured in another setting) and a REGARDS model (to validate input data). Multiple datatypes can be indicated in configuration. Datatype must be indicated in LTA request payload, to link request to configuration.",(0,a.jsx)("br",{})," None request can be managed by LTA Manager without datatypes"]})]})]})]}),"\n",(0,a.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",metastring:"title='rs-lta-manager configuration example'",children:'{\n  "microservice": "rs-lta-manager",\n  "modules": [\n    {\n      "module": {\n        "id": "ltamanager",\n        "name": "Lta Manager module",\n        "description": "Long term archival system. Handles complete products containing files and metadata.",\n        "version": "1.12.0",\n        "author": "REGARDS",\n        "legalOwner": "CNES",\n        "documentation": "https://github.com/RegardsOss"\n      },\n      "resetBeforeImport": true,\n      "configuration": [\n        {\n          "key": "fr.cnes.regards.framework.modules.tenant.settings.domain.DynamicTenantSetting",\n          "value": {\n            "name": "success_expiration_in_hours",\n            "description": "The lifetime of successful requests in hours.",\n            "value": "24",\n            "defaultValue": "24",\n            "className": "java.lang.Integer",\n            "containsSensitiveParameters": false\n          }\n        },\n        {\n          "key": "fr.cnes.regards.framework.modules.tenant.settings.domain.DynamicTenantSetting",\n          "value": {\n            "name": "storage",\n            "description": "The storage location name.",\n            "value": "\\"LTA\\"",\n            "defaultValue": "\\"LTA\\"",\n            "className": "java.lang.String",\n            "containsSensitiveParameters": false\n          }\n        },\n        {\n          "key": "fr.cnes.regards.framework.modules.tenant.settings.domain.DynamicTenantSetting",\n          "value": {\n            "name": "datatypes",\n            "description": "The datatype of incoming requests.",\n            "value": "{\\"LtaProduct\\":{\\"model\\":\\"LtaProductModel\\",\\"storePath\\":\\"//${YEAR}/${MONTH}/${DAY}/${PROPERTY(name)}/\\"}}",\n            "defaultValue": "{}",\n            "className": "java.util.HashMap",\n            "containsSensitiveParameters": false\n          }\n        }\n      ]\n    }\n  ]\n}\n'})})]})}function m(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var a=n(96540);const r={},s=a.createContext(r);function i(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);