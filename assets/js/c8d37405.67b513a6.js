"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[83225],{94115:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>o});var i=t(74848),r=t(28453);const s={id:"recipient-sender-notifier-plugins",title:"Recipient sender plugins",sidebar_label:"Recipient sender plugins",slug:"/development/backend/services/notifier/plugins/recipient-sender",sidebar_position:3},d=void 0,a={id:"development/services/notifier/plugins/recipient-sender-notifier-plugins",title:"Recipient sender plugins",description:"This guide introduces you how to configure Recipient sender plugins.",source:"@site/versioned_docs/version-2.1.0/development/services/notifier/plugins/recipient-sender-plugins.md",sourceDirName:"development/services/notifier/plugins",slug:"/development/backend/services/notifier/plugins/recipient-sender",permalink:"/docs/2.1.0/development/backend/services/notifier/plugins/recipient-sender",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-2.1.0/development/services/notifier/plugins/recipient-sender-plugins.md",tags:[],version:"2.1.0",sidebarPosition:3,frontMatter:{id:"recipient-sender-notifier-plugins",title:"Recipient sender plugins",sidebar_label:"Recipient sender plugins",slug:"/development/backend/services/notifier/plugins/recipient-sender",sidebar_position:3},sidebar:"dev",previous:{title:"Available plugins",permalink:"/docs/2.1.0/development/backend/services/notifier/plugins/listing"},next:{title:"Rule matcher plugins",permalink:"/docs/2.1.0/development/backend/services/notifier/plugins/rule-matcher"}},l={},o=[{value:"Common Sender configuration",id:"common-sender-configuration",level:2},{value:"Plugin implementation",id:"plugin-implementation",level:2},{value:"RabbitMQSender",id:"rabbitmqsender",level:3},{value:"LTA Request Sender",id:"lta-request-sender",level:3},{value:"Worker Manager Sender",id:"worker-manager-sender",level:3},{value:"Dissemination ACK Sender",id:"dissemination-ack-sender",level:3},{value:"GeoJSON FEM catalog usage",id:"geojson-fem-catalog-usage",level:4},{value:"OAIS catalog usage",id:"oais-catalog-usage",level:4},{value:"Common issue",id:"common-issue",level:2},{value:"Error while sending notification to receiver",id:"error-while-sending-notification-to-receiver",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["This guide introduces you how to configure Recipient sender plugins.",(0,i.jsx)(n.br,{}),"\n","These plugins allow to generate a payload, using product content and metadata, and send it to another system named\n",(0,i.jsx)(n.strong,{children:"recipient"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Here is the list of documented plugins:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#rabbitmqsender",children:"RabbitMQSender plugin"})," allows to send payload to an RabbitMQ exchange, with no transformation\napplied to the input"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#lta-request-sender",children:"LTA Request Sender"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#worker-manager-sender",children:"Worker Manager Sender"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#dissemination-ack-sender",children:"Dissemination ACK Sender"})}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["All the plugins implements\nthe ",(0,i.jsx)(n.a,{href:"https://github.com/RegardsOss/regards-backend/blob/master/rs-notifier/notifier/notifier-domain/src/main/java/fr/cnes/regards/modules/notifier/domain/plugin/IRecipientNotifier.java",children:"IRecipientNotifier interface"}),"."]}),"\n",(0,i.jsx)(n.admonition,{title:"developers advice",type:"info",children:(0,i.jsx)(n.p,{children:"If you want to create your own implementation of one of these extension points, you need to extend the specific\ninterface indicated."})}),"\n",(0,i.jsx)(n.h2,{id:"common-sender-configuration",children:"Common Sender configuration"}),"\n",(0,i.jsx)(n.admonition,{title:"Abstract class extension",type:"info",children:(0,i.jsxs)(n.p,{children:["Most of REGARDS OSS Plugins sender are extending\nthe ",(0,i.jsx)(n.a,{href:"https://github.com/RegardsOss/regards-plugins/blob/master/notifier-plugins/common-plugins/src/main/java/fr/cnes/regards/common/notifier/plugins/AbstractRabbitMQSender.java",children:"AbstractRabbitMQSender"}),"\nabstract class.",(0,i.jsx)(n.br,{}),"\n","This abstraction above plugins implementation provides a common configuration to manage a plugin that sends event to\nRabbitMQ exchange."]})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["AMQP senders will create the queue and exchange on RabbitMQ ",(0,i.jsx)(n.strong,{children:"on the first message posted on the exchange"}),".",(0,i.jsx)(n.br,{}),"\n","If you want the exchange and queue to exist before that, you need to explicitly create it on RabbitMQ through the\nRabbitMQ admin interface or inside your playbook inventory."]})}),"\n",(0,i.jsx)(n.p,{children:"Configuration parameters are:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default Value"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipientLabel"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["External service identifier we want to notify the products to - this information is sent back to the emitter that contacted Notifier",(0,i.jsx)("br",{})," When not specified, the emitter wont know what's the recipient label that received its events"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"description"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsx)(n.td,{children:"Recipient plugin description displayed in the REGARDS HMI"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"exchange"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"}}),(0,i.jsx)(n.td,{children:"RabbitMQ exchange name to publish message to"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"queueName"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsx)(n.td,{children:"RabbitMQ queue name to initialize"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"queueDeadLetterRoutingKey"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"regards.DLQ"})," if queue needs to be created"]}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsx)(n.td,{children:"RabbitMQ dead letter routing key on the queue"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"directNotificationEnabled"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["When ",(0,i.jsx)(n.code,{children:"true"}),", indicates this plugin can be used to send to the recipient directly without checking product content against Rule matcher plugins"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"blockingRequired"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["When ",(0,i.jsx)(n.code,{children:"true"}),", the sender will be informed that the notified resource must be blocked until the sender receives acknowledge from the recipient. Only then, the notified resource can be unlocked."]})]})]})]}),"\n",(0,i.jsx)(n.admonition,{title:"Why providing RabbitMQ Queue and DLX?",type:"info",children:(0,i.jsx)(n.p,{children:"This plugin creates a queue linked to the exchange, to ensure no message will be lost before the subscriber creates\nits queue."})}),"\n",(0,i.jsx)(n.p,{children:"This abstract class defines following default behavior:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ackRequired"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{children:"The emitter that contacted Notifier won't receive any acknowledgement from this notification"})]})})]}),"\n",(0,i.jsx)(n.h2,{id:"plugin-implementation",children:"Plugin implementation"}),"\n",(0,i.jsx)(n.h3,{id:"rabbitmqsender",children:"RabbitMQSender"}),"\n",(0,i.jsxs)(n.p,{children:["This plugin is used to send notifications to a specific RabbitMQ exchange with no transformation applied to the\ninput (what Notifier received).",(0,i.jsx)(n.br,{}),"\n","This plugin let you override following configuration:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default Value"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ackRequired"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["When ",(0,i.jsx)(n.code,{children:"true"}),", the emitter that contacted Notifier will be awaiting for an acknowledgement message"]})]})})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:"title='RabbitMqSender plugin configuration example'",children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "RabbitMQSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "{exchange name to use}"\n      },\n      {\n        "name": "queueName",\n        "type": "STRING",\n        "value": "{queue name to use}"\n      },\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "{identifier of the recipient}"\n      },\n      {\n        "name": "ackRequired",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "description",\n        "type": "STRING",\n        "value": "{plugin description}"\n      },\n      {\n        "name": "directNotificationEnabled",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "blockingRequired",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"lta-request-sender",children:"LTA Request Sender"}),"\n",(0,i.jsxs)(n.p,{children:["This plugin is designed to submit received features to the ",(0,i.jsx)(n.code,{children:"LTA manager"})," service."]}),"\n",(0,i.jsxs)(n.p,{children:["This plugin received a GeoJSON feature as an input and then send\n",(0,i.jsx)(n.a,{href:"/docs/2.1.0/development/backend/services/lta-manager/guides/submit-product-amqp",children:"submission request"}),"\nto the ",(0,i.jsx)(n.code,{children:"LTA manager"})," through AMQP."]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"This plugin only supports GeoJSON products as input"})}),"\n",(0,i.jsx)(n.p,{children:"This plugin lets you override the following configuration :"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"dataType"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"N"}),(0,i.jsx)(n.td,{children:"Product datatype of the generated DTOs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"sessionNamePattern"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["Pattern to name the session on the dashboard. A regular ",(0,i.jsx)("br",{}),"expression can be used, in the following way ",(0,i.jsx)(n.code,{children:"{<jsonPathToAccessProductType>}-#day(.*)"})," where the parameter ",(0,i.jsx)(n.code,{children:"<jsonPathToAccessProductType\\>"})," has to be replaced with the json path to access the product type."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipientTenant"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsx)(n.td,{children:"Value of the recipient tenant if this one is different from the one sending the message."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"replaceMode"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"N"}),(0,i.jsxs)(n.td,{children:["If ",(0,i.jsx)(n.code,{children:"true"}),", the request is replaced if it already exists"]})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="LtaRequestSender example"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "LtaRequestSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "{exchange name to use}"\n      },\n      {\n        "name": "queueName",\n        "type": "STRING",\n        "value": "{queue name to use}"\n      },\n      {\n        "name": "dataType",\n        "type": "STRING",\n        "value": "{product datatype}"\n      },\n      {\n        "name": "sessionNamePattern",\n        "type": "STRING",\n        "value": "{properties.type}-#day-example"\n      },\n      {\n        "name": "recipientTenant",\n        "type": "STRING",\n        "value": "{recipient tenant}"\n      },\n      {\n        "name": "replaceMode",\n        "type": "STRING",\n        "value": "{true or false}"\n      },\n      {\n        "name": "dataType",\n        "type": "STRING",\n        "value": "{datatype value}",\n        "dynamic": false\n      },\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "{identifier of the recipient}",\n        "dynamic": false\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"worker-manager-sender",children:"Worker Manager Sender"}),"\n",(0,i.jsxs)(n.p,{children:["This plugin is designed to send processing requests to the ",(0,i.jsx)(n.code,{children:"worker manager"})," service."]}),"\n",(0,i.jsx)(n.p,{children:"This plugin let you override the following configuration :"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"sessionNamePattern"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["Pattern to name the session on the dashboard. A regular ",(0,i.jsx)("br",{}),"expression can be used, in the following way ",(0,i.jsx)(n.code,{children:"{<jsonPathToAccessProductType>}-#day(.*)"})," where the parameter ",(0,i.jsx)(n.code,{children:"<jsonPathToAccessProductType\\>"})," has to be replaced with the json path to access to the product type.",(0,i.jsx)("br",{})," If the session pattern is not provided, session information are retrieved from the request metadata."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"contentType"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"N"}),(0,i.jsx)(n.td,{children:"Type of the processing that will be used by the Worker Manager to send this request to the right Worker type."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipientTenant"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsx)(n.td,{children:"Value of the recipient tenant if this one is different from the one sending the message. If not provided, the current tenant is used."})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="WorkerManagerSender example"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "WorkerManagerSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "{exchange name to use}"\n      },\n      {\n        "name": "queueName",\n        "type": "STRING",\n        "value": "{queue name to use}"\n      },\n      {\n        "name": "contentType",\n        "type": "STRING",\n        "value": "{processed product type}"\n      },\n      {\n        "name": "sessionNamePattern",\n        "type": "STRING",\n        "value": "{properties.type}-#day-example"\n      },\n      {\n        "name": "recipientTenant",\n        "type": "STRING",\n        "value": "{recipient tenant}"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Here is an example that send a product to the WorkerManager on the same instance as the FEM:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"No acknowledge required"}),"\n",(0,i.jsx)(n.li,{children:"No direct notification allowed"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="Send notification to WorkerManager"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "WorkerManagerSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "regards.broadcast.fr.cnes.regards.modules.workermanager.dto.events.in.RequestEvent"\n      },\n      {\n        "name": "contentType",\n        "type": "STRING",\n        "value": "<content type defined in the worker manager>"\n      },\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "<label of the process done by the worker>",\n        "dynamic": false\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Here is an example that send a product to the WorkerManager on the same instance as the FEM:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Send notification to the exchange used by the Worker Manager"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ackRequired"})," is defined to ",(0,i.jsx)(n.code,{children:"true"}),", so the worker will acknowledge the dissemination. Moreover, ",(0,i.jsx)(n.code,{children:"blockingRequired"})," is\ndefined to ",(0,i.jsx)(n.code,{children:"true"}),", which means the notification should prevent the emitter to allow product modification or deletion"]}),"\n",(0,i.jsxs)(n.li,{children:["Administrators can send any product to this worker through HMI, as ",(0,i.jsx)(n.code,{children:"directNotificationEnabled"})," is true and an\nHMI ",(0,i.jsx)(n.code,{children:"description"})," is provided"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="Send notification to WorkerManager with acknowledge required, direct notification allowed"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "WorkerManagerSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "1.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "exchange",\n        "type": "STRING",\n        "value": "regards.broadcast.fr.cnes.regards.modules.workermanager.dto.events.in.RequestEvent"\n      },\n      {\n        "name": "contentType",\n        "type": "STRING",\n        "value": "<content type defined in the worker manager>"\n      },\n      {\n        "name": "blockingRequired",\n        "type": "BOOLEAN",\n        "value": true,\n        "dynamic": false\n      },\n      {\n        "name": "description",\n        "type": "STRING",\n        "value": "Send notification to <do something using a worker>",\n        "dynamic": false\n      },\n      {\n        "name": "directNotificationEnabled",\n        "type": "BOOLEAN",\n        "value": true,\n        "dynamic": false\n      },\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "<label of the process done by the worker>",\n        "dynamic": false\n      },\n      {\n        "name": "ackRequired",\n        "type": "BOOLEAN",\n        "value": true,\n        "dynamic": false\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"dissemination-ack-sender",children:"Dissemination ACK Sender"}),"\n",(0,i.jsx)(n.p,{children:"This plugin is designed to send acknowledge messages to OAIS catalog and FEM catalog through AMQP messages."}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"The exchange and queue do not need to be created manually. If they don't exist, the plugin will create them before submitting the messages. However, if you're using an existing queue and exchange, both must be created in the following way:\nExchange :"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"virtual host: regards.multitenant.manager"}),"\n",(0,i.jsx)(n.li,{children:"Type: fanout"}),"\n",(0,i.jsx)(n.li,{children:"Name: geojson-ack-test"}),"\n"]}),(0,i.jsx)(n.p,{children:"Queue :"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"virtual host : regards.multitenant.manager"}),"\n",(0,i.jsx)(n.li,{children:"Type: Classic"}),"\n",(0,i.jsxs)(n.li,{children:["Arguments :","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"x-dead-letter-exchange : regards.DLX / String"}),"\n",(0,i.jsx)(n.li,{children:"x-dead-letter-routing-key : regards.DLQ / String"}),"\n",(0,i.jsx)(n.li,{children:"x-max-priority : 255 / Number"}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsxs)(n.p,{children:["This plugin does not inherit from\nthe ",(0,i.jsx)(n.a,{href:"https://github.com/RegardsOss/regards-plugins/blob/master/notifier-plugins/common-plugins/src/main/java/fr/cnes/regards/common/notifier/plugins/AbstractRabbitMQSender.java",children:"AbstractRabbitMQSender"}),",\nso ",(0,i.jsx)(n.a,{href:"#common-sender-configuration",children:"Common Sender config"})," parameters are not available."]})}),"\n",(0,i.jsx)(n.admonition,{type:"danger",children:(0,i.jsx)(n.p,{children:"You need to define either properties to send to FEM catalog either properties to send to OAIS catalog"})}),"\n",(0,i.jsx)(n.p,{children:"Configuration parameters, common to GeoJSON FEM catalog or OAIS catalog usage, are:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default Value"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"senderLabel"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"}}),(0,i.jsx)(n.td,{children:"Acknowledge sender label. Used by destination system to identify the current system"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"recipientLabel"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"}}),(0,i.jsxs)(n.td,{children:["External service identifier we want to notify the products to - this information is sent back to the emitter that contacted Notifier",(0,i.jsx)("br",{})," When not specified, the emitter wont know what's the recipient label that received its events"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"propertyPathToUrn"}),(0,i.jsx)(n.td,{children:"String"}),(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsx)(n.td,{children:"By default do not use this parameter. Alternative property from which to extract the origin catalog urn. By default the origin urn is read from the property originUrn of the feature. In some cases, the origin urn can be stored in another section of your data model."})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"geojson-fem-catalog-usage",children:"GeoJSON FEM catalog usage"}),"\n",(0,i.jsx)(n.p,{children:"This plugin let you override following configuration:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"featureDisseminationExchange"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["Name of the AMQP exchange to store messages before shovel. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"Only use when handling GeoJSON products."})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"featureDisseminationQueueName"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["Name of the AMQP queue to store messages before shovel. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"Only use when handling GeoJSON products."})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"featureDisseminationUseDedicatedDlq"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["When true, uses the ",(0,i.jsx)(n.code,{children:"featureDisseminationQueueName"})," value and adds ",(0,i.jsx)(n.code,{children:".DLQ"})," at the end to use it as the DLQ name. When false (default value), use ",(0,i.jsx)(n.code,{children:"regards.DLQ"})]})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="FEM catalog DisseminationAckSender example"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "DisseminationAckSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "2.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "{identifier of the recipient}"\n      },\n      {\n        "name": "senderLabel",\n        "type": "STRING",\n        "value": "{name of current platform used on destination system to acknowledge the dissemination}"\n      },\n      {\n        "name": "description",\n        "type": "STRING",\n        "value": "{plugin description}"\n      },\n      {\n        "name": "directNotificationEnabled",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "featureDisseminationExchange",\n        "type": "STRING",\n        "value": "{exchange name to store ACK messages before shovel}"\n      },\n      {\n        "name": "featureDisseminationQueueName",\n        "type": "STRING",\n        "value": "{queue name to store ACK messages before shovel}"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"oais-catalog-usage",children:"OAIS catalog usage"}),"\n",(0,i.jsx)(n.p,{children:"This plugin let you override following configuration:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Optional"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aipDisseminationExchange"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["Name of the exchange to store messages before shovel. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"Only use when handling OAIS products."})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aipDisseminationQueueName"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["Name of the AMQP queue to store messages before shovel. ",(0,i.jsx)("br",{})," ",(0,i.jsx)(n.strong,{children:"Only use when handling OAIS products."})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"aipQueueDedicatedDlq"}),(0,i.jsx)(n.td,{children:"boolean"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:"Y"}),(0,i.jsxs)(n.td,{children:["When true, uses the ",(0,i.jsx)(n.code,{children:"aipDisseminationQueueName"})," value and adds ",(0,i.jsx)(n.code,{children:".DLQ"})," at the end to use it as the DLQ name. When false (default value), use ",(0,i.jsx)(n.code,{children:"regards.DLQ"})]})]})]})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:'title="Example de configuration de plugin pour acquitter une diffusion de produits OAIS"',children:'{\n  "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n  "value": {\n    "pluginId": "DisseminationAckSender",\n    "label": "{label}",\n    "businessId": "{uniqueIdentifier}",\n    "version": "2.0.0",\n    "priorityOrder": 0,\n    "active": true,\n    "parameters": [\n      {\n        "name": "recipientLabel",\n        "type": "STRING",\n        "value": "{identifier of the recipient}"\n      },\n      {\n        "name": "senderLabel",\n        "type": "STRING",\n        "value": "{name of current platform used on destination system to acknowledge the dissemination}"\n      },\n      {\n        "name": "description",\n        "type": "STRING",\n        "value": "{plugin description}"\n      },\n      {\n        "name": "directNotificationEnabled",\n        "type": "BOOLEAN",\n        "value": "{true or false}"\n      },\n      {\n        "name": "aipDisseminationExchange",\n        "type": "STRING",\n        "value": "{exchange name to store ACK messages before shovel}"\n      },\n      {\n        "name": "aipDisseminationQueueName",\n        "type": "STRING",\n        "value": "{queue name to store ACK messages before shovel}"\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"common-issue",children:"Common issue"}),"\n",(0,i.jsx)(n.h3,{id:"error-while-sending-notification-to-receiver",children:"Error while sending notification to receiver"}),"\n",(0,i.jsx)(n.p,{children:"If the RabbitMQ sender plugin fails to send the notification with the error"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Error while sending notification to receiver:\ninequivalent arg 'x-dead-letter-routing-key' for queue 'xxxx' in vhost 'regards.multitenant.manager': received 'yyyy' but ...\n"})}),"\n",(0,i.jsx)(n.p,{children:"It means that your Notifier configuration is wrong and does not match with the real queue. Check your queue and\nspecifically the DLX and DLK attributes and use these values inside the Notifier configuration."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>a});var i=t(96540);const r={},s=i.createContext(r);function d(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);