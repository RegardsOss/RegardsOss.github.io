"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[71252],{64217:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>l});var s=r(74848),a=r(28453);const t={id:"1.14-to-1.15",title:"V1.14 to V1.15",slug:"/setup/swarm/migration/1.14-to-1.15",sidebar_position:5},o=void 0,i={id:"setup/swarm/migration/1.14-to-1.15",title:"V1.14 to V1.15",description:"Steps to migrate REGARDS from version 1.14 to 1.15",source:"@site/versioned_docs/version-2.2.0/setup/swarm/migration/1.14-to-1.15.md",sourceDirName:"setup/swarm/migration",slug:"/setup/swarm/migration/1.14-to-1.15",permalink:"/docs/2.2.0/setup/swarm/migration/1.14-to-1.15",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-2.2.0/setup/swarm/migration/1.14-to-1.15.md",tags:[],version:"2.2.0",sidebarPosition:5,frontMatter:{id:"1.14-to-1.15",title:"V1.14 to V1.15",slug:"/setup/swarm/migration/1.14-to-1.15",sidebar_position:5},sidebar:"install",previous:{title:"V1.13 to V1.14",permalink:"/docs/2.2.0/setup/swarm/migration/1.13-to-1.14"},next:{title:"V1.15 to V2.0",permalink:"/docs/2.2.0/setup/swarm/migration/1.15-to-2.0"}},d={},l=[{value:"Migrating from 1.15.1 to 1.15.2",id:"migrating-from-1151-to-1152",level:2},{value:"Notifier plugin configuration",id:"notifier-plugin-configuration",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Steps to migrate REGARDS from version 1.14 to 1.15"}),"\n",(0,s.jsx)(n.admonition,{title:"Please read until the end",type:"danger",children:(0,s.jsx)(n.p,{children:"There is some steps remaining at the end of this guide related to RabbitMQ"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Download last playbook version and move your inventory inside the new playbook"}),"\n",(0,s.jsxs)(n.li,{children:["Edit your inventory file ",(0,s.jsx)(n.code,{children:"group_vars/all/main.yml"})," :"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# Replace \nversion: 1.14.9\n# Into \nversion: 1.15.2\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["When this guide has been written, last version was 1.15.2. Check if there is an updated version\navailable ",(0,s.jsx)(n.a,{href:"https://github.com/orgs/RegardsOss/packages/container/package/rs-authentication",children:"here"})]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Remove deprecated property ",(0,s.jsx)(n.code,{children:"docker_dns"})," inside your inventory file ",(0,s.jsx)(n.code,{children:"group_vars/docker_nodes/main.yml"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"#docker_dns:\n#  - 8.8.8.8\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Inside your inventory file ",(0,s.jsx)(n.code,{children:"group_vars/regards_nodes/main.yml"}),", remove deprecated properties:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["all references to ",(0,s.jsx)(n.code,{children:"enable_resource_limits"})," and ",(0,s.jsx)(n.code,{children:"enable_resource_limits"})]}),"\n",(0,s.jsxs)(n.li,{children:["property ",(0,s.jsx)(n.code,{children:"group_docker_use_log_concentrator"})]}),"\n",(0,s.jsxs)(n.li,{children:["property ",(0,s.jsx)(n.code,{children:"group_docker_mservices.front.securised"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If you declare a some memory limit override inside your inventory file ",(0,s.jsx)(n.code,{children:"group_vars/regards_nodes/main.yml"}),", you need\nto write ",(0,s.jsx)(n.code,{children:"2560m"})," instead of ",(0,s.jsx)(n.code,{children:"2560mb"})," or ",(0,s.jsx)(n.code,{children:"2g"})," instead of ",(0,s.jsx)(n.code,{children:"2gb"})," (remove ",(0,s.jsx)(n.code,{children:"b"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Inside your inventory file ",(0,s.jsx)(n.code,{children:"group_vars/regards_nodes/main.yml"}),", add ",(0,s.jsx)(n.code,{children:"group_docker_static_files_migrated"})," property:"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"[...]\ngroup_docker_registry: ghcr.io/regardsoss\n\n# Files needs to be moved from ./files/ to ../../static/\n# using $ mv ./files ../../static\ngroup_docker_static_files_migrated: False\n\ngroup_docker_tags:\n  [...]\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:"Static files will be migrated with REGARDS V1.16 release."})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Shutdown REGARDS using the playbook"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ansible-playbook -i [...] regards-shutdown.yml [...]\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Disconnect swarm nodes"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ansible-playbook -i [...] delete-swarm.yml [...]\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reinstall swarm nodes"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ansible-playbook -i [...] setup-vm.yml [...]\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["You must do the ",(0,s.jsx)(n.code,{children:"setup-vm.yml"})," step whether you use the logging stack or not"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Update REGARDS using the playbook"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ansible-playbook -i [...] regards.yml [...]\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Wait the stack to be up and running"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /path/to/regards/cli\n./status.sh\n# Check every containers is up and running\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Now, connect to your RabbitMQ node or one of its replicate"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Enter inside one of the RabbitMQ container\n./exec.sh rs-rabbitmq bash\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Activate two flags required to migrate from RabbitMQ 3.8 to RabbitMQ 3.11 later, with REGARDS V1.16 release:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"rabbitmqctl enable_feature_flag maintenance_mode_status\nrabbitmqctl enable_feature_flag user_limits\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"RabbitMQ 3.11 requires these feature flags to be enabled before the upgrade.\nThe upgrade of REGARDS V1.16 will fail if you miss this step."})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Create a migration script using ",(0,s.jsx)(n.code,{children:"vi /var/lib/rabbitmq/mnesia/migration-to-1.15.sh"})," with following content:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash -e\nADMIN_USER=guest\nADMIN_PASSWORD=guest\n\n# Param 1 : Shovel ID\n# Param 2 : Source queue\n# Param 2 : Dest queue\nfunction add_shovel\n{\n  local shovelId=${1}\n  local srcQueue=${2}\n  local destQueue=${3}\n\n  printf >&2 "[\\033[32mSHOVEL\\033[m]\\tAdd shovel to move ${srcQueue} to ${destQueue}\\n"\n  rabbitmqctl --quiet set_parameter shovel migrate-${shovelId} \\\n  "{\\"src-protocol\\": \\"amqp091\\", \\"src-uri\\": \\"amqp:///regards.multitenant.manager\\", \\"src-queue\\": \\"${srcQueue}\\", \\"dest-protocol\\": \\"amqp091\\", \\"dest-uri\\": \\"amqp:///regards.multitenant.manager\\", \\"dest-queue\\": \\"${destQueue}\\"}"\n}\n\n# Param 1 : Shovel ID\nfunction delete_shovel\n{\n  local shovelId=${1}\n\n  printf >&2 "[\\033[32mSHOVEL\\033[m]\\tRemove shovel ${shovelId}\\n"\n  rabbitmqctl --quiet clear_parameter shovel migrate-${shovelId}\n}\n\n\n# Param 1 : Queue Name to delete\n# Ensure queue is empty\nfunction delete_empty_queue\n{\n  local queueName=${1}\n\n  printf >&2 "[\\033[32mQUEUES\\033[m]\\tRemove queue ${queueName}\\n"\n  rabbitmqctl --quiet delete_queue --vhost=regards.multitenant.manager ${queueName} --if-unused --if-empty || printf >&2 "[\\033[34mQUEUES\\033[m]\\tQueue ${queueName} not existing, ignoring error...\\n"\n}\n\n\n# Param 1 : Queue Name to delete\n# Do not check if queue is empty\nfunction delete_queue\n{\n  local queueName=${1}\n\n  printf >&2 "[\\033[32mQUEUES\\033[m]\\tRemove queue ${queueName}\\n"\n  rabbitmqctl --quiet delete_queue --vhost=regards.multitenant.manager ${queueName} --if-unused || printf >&2 "[\\033[34mQUEUES\\033[m]\\tQueue ${queueName} not existing, ignoring error...\\n"\n}\n\n# Param 1 : Exchange Name to delete\nfunction delete_exchange\n{\n  local exchangeName=${1}\n\n  printf >&2 "[\\033[32mEXCHANGES\\033[m]\\tRemove exchange ${exchangeName}\\n"\n  rabbitmqadmin --username=$ADMIN_USER --password=$ADMIN_PASSWORD -V regards.multitenant.manager delete exchange name="${exchangeName}" || printf >&2 "[\\033[34mEXCHANGES\\033[m]\\tExchange ${exchangeName} not existing, ignoring error...\\n"\n}\n\n\n\nadd_shovel 01 \\\n  regards.broadcast.rs-dam.fr.cnes.regards.modules.storage.client.FileRequestGroupEventHandler \\\n  regards.broadcast.rs-dam.fr.cnes.regards.modules.filecatalog.client.handler.FileRequestGroupEventHandler\n\nadd_shovel 02 \\\n  regards.broadcast.rs-ingest.fr.cnes.regards.modules.storage.client.FileRequestGroupEventHandler \\\n  regards.broadcast.rs-ingest.fr.cnes.regards.modules.filecatalog.client.handler.FileRequestGroupEventHandler\n\nadd_shovel 03 \\\n  regards.broadcast.rs-fem.fr.cnes.regards.modules.storage.client.FileRequestGroupEventHandler \\\n  regards.broadcast.rs-fem.fr.cnes.regards.modules.filecatalog.client.handler.FileRequestGroupEventHandler\n\nadd_shovel 04 \\\n  regards.broadcast.rs-order.fr.cnes.regards.modules.storage.client.FileReferenceEventHandler \\\n  regards.broadcast.rs-order.fr.cnes.regards.modules.filecatalog.client.handler.FileReferenceEventHandler\n\nadd_shovel 05 \\\n  regards.broadcast.rs-order.fr.cnes.regards.modules.storage.client.FileReferenceUpdateEventHandler \\\n  regards.broadcast.rs-order.fr.cnes.regards.modules.filecatalog.client.handler.FileReferenceUpdateEventHandler\n\nadd_shovel 06 \\\n  regards.broadcast.fr.cnes.regards.modules.workermanager.dto.events.in.RequestEvent \\\n  regards.broadcast.rs-worker-manager.fr.cnes.regards.modules.workermanager.service.flow.RequestHandler\n\nadd_shovel 07 \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.AvailabilityFlowItemHandler \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.handler.FileRestorationRequestEventHandler\n\nadd_shovel 08 \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.CancelRequestGroupsEventHandler \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.handler.CancelRequestGroupsEventHandler\n\nadd_shovel 09 \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.CopyFlowHandler \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.handler.FilesCopyEventHandler\n\nadd_shovel 10 \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.DeletionFlowHandler \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.handler.FilesDeletionEventHandler\n\nadd_shovel 11 \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.ReferenceFlowItemHandler \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.handler.FilesReferenceEventHandler\n\nadd_shovel 12 \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.RetryFlowItemHandler \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.handler.FilesRetryRequestEventHandler\n\nadd_shovel 13 \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.StorageFlowItemHandler \\\n  regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.handler.FilesStorageRequestEventHandler\n\nprintf >&2 "[\\033[32mSHOVEL\\033[m]\\tWait 30s to ensure messages have been moved\\n"\nsleep 30\n\ndelete_shovel 01\ndelete_shovel 02\ndelete_shovel 03\ndelete_shovel 04\ndelete_shovel 05\ndelete_shovel 06\ndelete_shovel 07\ndelete_shovel 08\ndelete_shovel 09\ndelete_shovel 10\ndelete_shovel 11\ndelete_shovel 12\ndelete_shovel 13\n\ndelete_empty_queue regards.broadcast.rs-dam.fr.cnes.regards.modules.storage.client.FileRequestGroupEventHandler\ndelete_empty_queue regards.broadcast.rs-ingest.fr.cnes.regards.modules.storage.client.FileRequestGroupEventHandler\ndelete_empty_queue regards.broadcast.rs-fem.fr.cnes.regards.modules.storage.client.FileRequestGroupEventHandler\ndelete_empty_queue regards.broadcast.rs-order.fr.cnes.regards.modules.storage.client.FileReferenceEventHandler\ndelete_empty_queue regards.broadcast.rs-order.fr.cnes.regards.modules.storage.client.FileReferenceUpdateEventHandler\ndelete_empty_queue regards.broadcast.fr.cnes.regards.modules.workermanager.dto.events.in.RequestEvent\ndelete_empty_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.AvailabilityFlowItemHandler\ndelete_empty_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.CancelRequestGroupsEventHandler\ndelete_empty_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.CopyFlowHandler\ndelete_empty_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.DeletionFlowHandler\ndelete_empty_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.ReferenceFlowItemHandler\ndelete_empty_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.RetryFlowItemHandler\ndelete_empty_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.StorageFlowItemHandler\n\ndelete_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.ReferenceFlowItemHandler.DLQ\ndelete_queue regards.broadcast.rs-storage.fr.cnes.regards.modules.storage.service.file.flow.StorageFlowItemHandler.DLQ\ndelete_queue regards.broadcast.rs-catalog.fr.cnes.regards.modules.catalog.stac.service.collection.IdMappingUpdateHandler\ndelete_queue regards.unicast.swot.rs-dam.fr.cnes.regards.modules.dam.domain.entities.event.DatasetEvent\ndelete_queue regards.unicast.swot.rs-dam.fr.cnes.regards.modules.dam.domain.entities.event.NotDatasetEntityEvent\n\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.flow.RetryFlowItem\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.flow.AvailabilityFlowItem\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.flow.CopyFlowItem\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.flow.DeletionFlowItem\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.flow.ReferenceFlowItem\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.flow.RetryFlowItem\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.flow.StorageFlowItem\n\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.event.CancelRequestEvent\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.event.FileReferenceEvent\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.event.FileReferenceUpdateEvent\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.event.FileRequestsGroupEvent\ndelete_exchange regards.broadcast.fr.cnes.regards.modules.storage.domain.event.QuotaUpdateEvent\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Edit ",(0,s.jsx)(n.code,{children:"ADMIN_USER"})," and ",(0,s.jsx)(n.code,{children:"ADMIN_PASSWORD"})," variables if you disabled the ",(0,s.jsx)(n.code,{children:"guest"})," default admin user"]}),"\n",(0,s.jsx)(n.li,{children:"Execute the script:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"chmod +x /var/lib/rabbitmq/mnesia/migration-to-1.15.sh\n/var/lib/rabbitmq/mnesia/migration-to-1.15.sh\nrm -f /var/lib/rabbitmq/mnesia/migration-to-1.15.sh\n"})}),"\n",(0,s.jsx)(n.h2,{id:"migrating-from-1151-to-1152",children:"Migrating from 1.15.1 to 1.15.2"}),"\n",(0,s.jsxs)(n.p,{children:["If you have installed the 1.15.1 version and want to upgrade to 1.15.X, some microservices ",(0,s.jsx)(n.strong,{children:"won't boot with flyway\nissues"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["You need to add the following property inside your inventory file ",(0,s.jsx)(n.code,{children:"group_vars/regards_nodes/main.yml"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"group_config_mservices:\n  flyway:\n    out_of_order: true\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Update REGARDS using the playbook"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ansible-playbook -i [...] regards.yml [...]\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Ensure REGARDS is running fine (using ",(0,s.jsx)(n.code,{children:"status.sh"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Remove the added property ",(0,s.jsx)(n.code,{children:"flyway.out_of_order"})," and update REGARDS again."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"notifier-plugin-configuration",children:"Notifier plugin configuration"}),"\n",(0,s.jsxs)(n.p,{children:["Notifier ",(0,s.jsx)(n.code,{children:"dissemination-ack-sender-plugin"})," configuration has changed with the configuration version 1.5 of the plugin."]}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"The notifier plugin configuration migration must be done for all projects of your REGARDS instance."})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Export the Notifier configuration. See ",(0,s.jsx)(n.a,{href:"/docs/2.2.0/user-guide/project-configuration/microservices/",children:"this documentation"})," to do it."]}),"\n",(0,s.jsxs)(n.li,{children:["Find in the configuration file exported if any ",(0,s.jsx)(n.code,{children:"dissemination-ack-sender-plugin"})," exists. ",(0,s.jsxs)(n.strong,{children:["This migration is only mandatory for REGARDS project using ",(0,s.jsx)(n.code,{children:"dissemination-ack-sender-plugin"})," plugin"]})]}),"\n",(0,s.jsx)(n.li,{children:"In the plugin configuration :"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GeoJson exchange parameter renamed :"}),"\nIf the product to ack in the source REGARDS catalog is a GeoJson product, modify the RabbitMQ exchange name parameter.\nThe name parameter was ",(0,s.jsx)(n.code,{children:"exchange"})," in 1.14, and is ",(0,s.jsx)(n.code,{children:"featureDisseminationExchange"}),"in 1.15."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "configuration": [\n    {\n      "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n      "value": {\n        "pluginId": "DisseminationAckSender",\n        "parameters": [\n          {\n            "name": "featureDisseminationExchange", \n            "type": "STRING",\n            "value": "<Exchange name to send AIP ack dissemination notification>",\n            "dynamic": false\n          },\n          ...\n        ]\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GeoJson queue parameter renamed :"}),"\nIf the product to ack in the source REGARDS catalog is a GeoJson product, modify the RabbitMQ queue name parameter.\nThe name parameter was ",(0,s.jsx)(n.code,{children:"queueName"})," in 1.14, and is ",(0,s.jsx)(n.code,{children:"featureDisseminationQueueName"}),"in 1.15."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "configuration": [\n    {\n      "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n      "value": {\n        "pluginId": "DisseminationAckSender",\n        "parameters": [\n          {\n            "name": "featureDisseminationQueueName", \n            "type": "STRING",\n            "value": "<Queue name to create if no queue is binded to configured GeoJson exchange>",\n            "dynamic": false\n          },\n          ...\n        ]\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"New AIP exchange parameter :"}),"\nIf the product to ack in the source REGARDS catalog is an OAIS product, add the RabbitMQ exchange name parameter."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "configuration": [\n    {\n      "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n      "value": {\n        "pluginId": "DisseminationAckSender",\n        "parameters": [\n          {\n            "name": "aipDisseminationExchange",\n            "type": "STRING",\n            "value": "<Exchange name to send AIP ack dissemination notification>",\n            "dynamic": false\n          },\n          ...\n        ]\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"New AIP queue parameter :"}),"\nIf the product to ack in the source REGARDS catalog is an OAIS product, add the RabbitMQ exchange name parameter."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "configuration": [\n    {\n      "key": "fr.cnes.regards.framework.modules.plugins.domain.PluginConfiguration",\n      "value": {\n        "pluginId": "DisseminationAckSender",\n        "parameters": [\n          {\n            "name": "aipDisseminationExchange",\n            "type": "STRING",\n            "value": "<Queue name to create if no queue is binded to configured AIP exchange>",\n            "dynamic": false\n          },\n          ...\n        ]\n      }\n    }\n  ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Some parameter to remove :"}),"\nSome parameters are now useless. Please remove following parameters, if exist :"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"recipientTenant"}),"\n",(0,s.jsx)(n.li,{children:"queueDlRoutingKey"}),"\n",(0,s.jsx)(n.li,{children:"recipientLabel"}),"\n",(0,s.jsx)(n.li,{children:"description"}),"\n",(0,s.jsx)(n.li,{children:"directNotificationEnabled"}),"\n",(0,s.jsx)(n.li,{children:"blockingRequired"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var s=r(96540);const a={},t=s.createContext(a);function o(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);