"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[15605],{81809:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>s,metadata:()=>o,toc:()=>d});var r=n(74848),a=n(28453);const s={id:"backend-lta-manager-import-export",title:"LTA Manager Import/Export",sidebar_label:"Import/Export",slug:"/development/backend/services/lta-manager/configuration/import-export"},i=void 0,o={id:"development/services/lta-manager/configuration/backend-lta-manager-import-export",title:"LTA Manager Import/Export",description:"Microservices settings regroup a set of settings that are specific by tenant",source:"@site/docs/development/services/lta-manager/configuration/lta-manager-import-export.md",sourceDirName:"development/services/lta-manager/configuration",slug:"/development/backend/services/lta-manager/configuration/import-export",permalink:"/docs/development/backend/services/lta-manager/configuration/import-export",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/docs/development/services/lta-manager/configuration/lta-manager-import-export.md",tags:[],version:"current",frontMatter:{id:"backend-lta-manager-import-export",title:"LTA Manager Import/Export",sidebar_label:"Import/Export",slug:"/development/backend/services/lta-manager/configuration/import-export"},sidebar:"dev",previous:{title:"All endpoints (OpenAPI)",permalink:"/docs/development/backend/services/lta-manager/api-swagger"},next:{title:"Static configuration",permalink:"/docs/development/backend/services/lta-manager/configuration/static-configuration"}},c={},d=[{value:"Import/Export API",id:"importexport-api",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Microservices settings regroup a set of settings that are specific by ",(0,r.jsx)(t.a,{href:"/docs/development/concepts/multitenant/",children:"tenant"}),"\nand stored in the microservice database."]}),"\n",(0,r.jsx)(t.h2,{id:"importexport-api",children:"Import/Export API"}),"\n",(0,r.jsxs)(t.p,{children:["To configure some microservice settings for a specific tenant, you need to follow the ",(0,r.jsx)(t.a,{href:"/docs/development/services/common/common-import-export-configuration",children:"generic Import/Export service\nconfiguration guide"}),", it will help you understand the expected JSON\nfile payload that you can send to the\n",(0,r.jsx)(t.a,{href:"/docs/development/backend/services/lta-manager/api-swagger#tag/module-manager-controller/operation/importConfiguration",children:"import configuration endpoint"}),"."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Configuration type"}),(0,r.jsx)(t.th,{children:"Available"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Import configuration in json format"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Export configuration in json format"}),(0,r.jsx)(t.td,{children:"True"}),(0,r.jsx)(t.td,{})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Reset configuration before import"}),(0,r.jsx)(t.td,{children:"False"}),(0,r.jsx)(t.td,{children:"Not implemented yet"})]})]})]}),"\n",(0,r.jsxs)(t.p,{children:["This configuration can also be imported or exported\nthrough ",(0,r.jsx)(t.a,{href:"/docs/user-guide/project-configuration/microservices/",children:"administrator UI"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Dynamic settings for ",(0,r.jsx)(t.code,{children:"LTA Manager"})," service are :"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Default Value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"success_expiration_in_hours"}),(0,r.jsx)(t.td,{children:"integer"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"24"})}),(0,r.jsxs)(t.td,{children:["The lifetime of successful requests in hours.",(0,r.jsx)("br",{})," After a successfull LTA requests submission, REGARDS keeps requests in database. This setting precise how long these sucessfull request are kept before be permanently deleted. Only LTA request are deleted. OAIS product created stay alive as long as they are not deleted from OAIS service (See Ingest microservice)"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"storage"}),(0,r.jsx)(t.td,{children:"string"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"LTA"})}),(0,r.jsxs)(t.td,{children:["The storage location name. ",(0,r.jsx)("br",{}),"Storage location is add to all generated OAIS requests, to specify where files has to be stored. This location can exists in storage service (See Storage microservice), or virtual storage (See Ingest microservice)"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"datatypes"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"Map<String, DatatypeParameter>"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"{}"})," (empty map)"]}),(0,r.jsxs)(t.td,{children:["The datatype of incoming requests description.",(0,r.jsx)("br",{})," Associate a datatype (a simple label) to a storage path (path inside storage configured in another setting) and a REGARDS model (to validate input data). Multiple datatypes can be indicated in configuration. Datatype must be indicated in LTA request payload, to link request to configuration.",(0,r.jsx)("br",{})," None request can be managed by LTA Manager without datatypes"]})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",metastring:"title='rs-lta-manager configuration example'",children:'{\n  "microservice": "rs-lta-manager",\n  "modules": [\n    {\n      "module": {\n        "id": "ltamanager",\n        "name": "Lta Manager module",\n        "description": "Long term archival system. Handles complete products containing files and metadata.",\n        "version": "1.12.0",\n        "author": "REGARDS",\n        "legalOwner": "CNES",\n        "documentation": "https://github.com/RegardsOss"\n      },\n      "resetBeforeImport": true,\n      "configuration": [\n        {\n          "key": "fr.cnes.regards.framework.modules.tenant.settings.domain.DynamicTenantSetting",\n          "value": {\n            "name": "success_expiration_in_hours",\n            "description": "The lifetime of successful requests in hours.",\n            "value": "24",\n            "defaultValue": "24",\n            "className": "java.lang.Integer",\n            "containsSensitiveParameters": false\n          }\n        },\n        {\n          "key": "fr.cnes.regards.framework.modules.tenant.settings.domain.DynamicTenantSetting",\n          "value": {\n            "name": "storage",\n            "description": "The storage location name.",\n            "value": "\\"LTA\\"",\n            "defaultValue": "\\"LTA\\"",\n            "className": "java.lang.String",\n            "containsSensitiveParameters": false\n          }\n        },\n        {\n          "key": "fr.cnes.regards.framework.modules.tenant.settings.domain.DynamicTenantSetting",\n          "value": {\n            "name": "datatypes",\n            "description": "The datatype of incoming requests.",\n            "value": "{\\"LtaProduct\\":{\\"model\\":\\"LtaProductModel\\",\\"storePath\\":\\"//${YEAR}/${MONTH}/${DAY}/${PROPERTY(name)}/\\"}}",\n            "defaultValue": "{}",\n            "className": "java.util.HashMap",\n            "containsSensitiveParameters": false\n          }\n        }\n      ]\n    }\n  ]\n}\n'})})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var r=n(96540);const a={},s=r.createContext(a);function i(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);