"use strict";(self.webpackChunkregardsoss_github_io=self.webpackChunkregardsoss_github_io||[]).push([[87588],{32234:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var n=i(74848),r=i(28453);const o={title:"How it works",sidebar_label:"How it works",slug:"/development/services/admin/conception",sidebar_position:2},t=void 0,a={id:"development/services/admin/conception",title:"How it works",description:"The rs-admin is designed to manage specific responsibilities for each project within the Regards architecture.",source:"@site/versioned_docs/version-2.0.0/development/services/admin/conception.md",sourceDirName:"development/services/admin",slug:"/development/services/admin/conception",permalink:"/docs/development/services/admin/conception",draft:!1,unlisted:!1,editUrl:"https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-2.0.0/development/services/admin/conception.md",tags:[],version:"2.0.0",sidebarPosition:2,frontMatter:{title:"How it works",sidebar_label:"How it works",slug:"/development/services/admin/conception",sidebar_position:2},sidebar:"dev",previous:{title:"Overview",permalink:"/docs/development/services/admin/overview"},next:{title:"Publish a notification",permalink:"/docs/development/services/admin/api-guides/amqp/publish-notification"}},c={},d=[{value:"Module : accessrights",id:"module--accessrights",level:2},{value:"Module : notification",id:"module--notification",level:2},{value:"Module : session",id:"module--session",level:2}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"rs-admin"})," is designed to manage specific responsibilities for each project within the Regards architecture.\nThis microservice consolidates a range of functionalities, organized into different modules."]}),"\n",(0,n.jsx)(s.h2,{id:"module--accessrights",children:"Module : accessrights"}),"\n",(0,n.jsx)(s.p,{children:"This module is designed to manage access rights for Regards users. It handles the distribution of licenses across\nprojects and project users, controlling the ability to download order files."}),"\n",(0,n.jsx)(s.p,{children:"A project user is a user that must be associated with only one project in Regards. Each project user is linked to a\nunique account. The same account can have different project users for each project, allowing one account to be connected\nto multiple projects. The relationship between a project user and an account is established via the user\u2019s unique email\naddress, which also serves as the login for the Regards UI."}),"\n",(0,n.jsxs)(s.p,{children:["The account is stored in the database within the ",(0,n.jsx)(s.code,{children:"rs-admin-instance"})," as a single instance. The project user, however, is\nstored separately in the database for each project or tenant in Regards."]}),"\n",(0,n.jsx)(s.p,{children:"The following state diagram outlines the various states a project user goes through during the registration process in\nRegards:"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"access_project_projectuser_state_diagram",src:i(90069).A+"",width:"833",height:"658"})}),"\n",(0,n.jsx)(s.p,{children:"A project user has a single role in a project. When the microservice is started, the following list of roles is loaded\nfrom the database and made available for the creation of new project users :"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"PUBLIC"})," role : not connected user for a project. Users of this role have read-only access."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"INSTANCE_ADMIN"})," role : administrator for ",(0,n.jsx)(s.a,{href:"/docs/development/concepts/multitenant/",children:"multitenant"})," or several projects. Users\nof this special role can override any restrictions on access to features and data for all projects."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"PROJECT_ADMIN"})," role : main administrator for a project. Users of this special role can override any restrictions on\naccess to features and data."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"ADMIN"})," role : administrator for a project. Users of this role have access to all project administration functions."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"EXPLOIT"})," role : exploit (connected user) for a project. Users of this role are granted access to a limited number\nof administrative functions related to project operation."]}),"\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.strong,{children:"REGISTERED_USER"})," role : connected user for a project. Users of this role can consult, download and order data."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"A role is always inherited from a parent role. Each role contains a list of access rights associated with specific http\nendpoints (see the menu item in each microservice: API Guides->Rest->All endpoints (OpenAPI)), a role inherits all\naccess rights from a parent role.\nRegards allows you to create new roles that are inherited from a parent role."}),"\n",(0,n.jsx)(s.p,{children:"A project user has one or more access groups. An access group is used to determine a user's rights to view datasets, so\nthat they can subsequently carry out commands."}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsx)(s.p,{children:"This is the Regards administrator responsibility to determines the access rights of each user."})}),"\n",(0,n.jsx)(s.h2,{id:"module--notification",children:"Module : notification"}),"\n",(0,n.jsx)(s.p,{children:"The purpose of this module is to send notifications to inform users connected to Regards about the progress of tasks\nperformed by microservices. Notifications can be sent to a specific user or to all users assigned to a particular role."}),"\n",(0,n.jsx)(s.p,{children:"A user interface allows notifications to be viewed using various criteria. A notification consists of the following\nparameters:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"created date,"}),"\n",(0,n.jsx)(s.li,{children:"message,"}),"\n",(0,n.jsx)(s.li,{children:"sender : name of microservice (rs-dam, rs-fem, rs-lta-manager ...)"}),"\n",(0,n.jsx)(s.li,{children:"status (read/unread),"}),"\n",(0,n.jsx)(s.li,{children:"title,"}),"\n",(0,n.jsx)(s.li,{children:"type (Error, Warning, Info, Fatal)"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["The notification can be created by ",(0,n.jsx)(s.a,{href:"/docs/development/services/admin/api-guides/amqp/publish-notification",children:"AMQP message"})," or\nby ",(0,n.jsx)(s.a,{href:"/docs/development/services/admin/api-guides/rest/api-swagger#tag/notification-controller",children:"REST API"}),"."]}),"\n",(0,n.jsx)(s.p,{children:"When a notification has been created and stored in the database, the microservice sends emails to the following\nrecipients. Each user can configure the frequency at which emails are sent. This setting is located in each user's\nprofile. The list of available frequencies is as follows : custom(day, hour), daily, weekly, monthly."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{alt:"access_project_notification_sequence_diagram",src:i(37698).A+"",width:"853",height:"595"})}),"\n",(0,n.jsx)(s.p,{children:"In the above diagram, each frequency has its own scheduler."}),"\n",(0,n.jsx)(s.h2,{id:"module--session",children:"Module : session"}),"\n",(0,n.jsx)(s.p,{children:"The purpose of this module is to centralize information on the monitoring of data additions in Regards, making it easier\nfor users to supervise various processes:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Data acquisition (available actions: view acquisition chains, view requests in error, restart errors)\nerrors)"}),"\n",(0,n.jsx)(s.li,{children:"Data referencing (possible action: view referenced products, view errors, restart errors)"}),"\n",(0,n.jsx)(s.li,{children:"Data archiving and storage (possible action: relaunch errors)"}),"\n",(0,n.jsx)(s.li,{children:"Data notification"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:'Sessions enable monitoring of the various steps in data processing within Regards, from the data provider acquisition to\nthe indexation in catalog.\nA session is defined by a session name and a session source. This information is provided by each microservice that\nnotifies the "Session" module to update the session\'s state. A source can contain one or more sessions, but each session\nbelongs to only one source. For each session, the user can track the number of products referenced and the number of\nproducts distributed\nSources and their respective sessions are displayed in the Regards administrator UI dashboard.'}),"\n",(0,n.jsxs)(s.p,{children:["Each microservice (",(0,n.jsx)(s.code,{children:"rs-dam"}),", ",(0,n.jsx)(s.code,{children:"rs-dataprovider"}),", ",(0,n.jsx)(s.code,{children:"rs-fem"}),", ",(0,n.jsx)(s.code,{children:"rs-storage"}),", ",(0,n.jsx)(s.code,{children:"rs-worker-manager"}),", ",(0,n.jsx)(s.code,{children:"rs-ingest"}),") sends an\nAMQP message to update session information asynchronously."]}),"\n",(0,n.jsx)(s.p,{children:"Each AMQP message is typed according to the process:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["ACQUISITION : for steps originating from ",(0,n.jsx)(s.code,{children:"rs-dataprovider"})," and ",(0,n.jsx)(s.code,{children:"rs-worker-manager"})]}),"\n",(0,n.jsxs)(s.li,{children:["REFERENCING : for steps originating from ",(0,n.jsx)(s.code,{children:"rs-ingest"})," and ",(0,n.jsx)(s.code,{children:"rs-fem"})]}),"\n",(0,n.jsxs)(s.li,{children:["STORAGE : for steps originating from ",(0,n.jsx)(s.code,{children:"rs-storage"})]}),"\n",(0,n.jsxs)(s.li,{children:["DISSEMINATION : for steps originating from ",(0,n.jsx)(s.code,{children:"rs-dam"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},37698:(e,s,i)=>{i.d(s,{A:()=>n});const n=i.p+"assets/images/access_project_notification_sequence_diagram-72c1489db187494bf80201ba67d29b6d.png"},90069:(e,s,i)=>{i.d(s,{A:()=>n});const n=i.p+"assets/images/access_project_projectuser_state_diagram-ff927fafe364551044984efad9677a4c.png"},28453:(e,s,i)=>{i.d(s,{R:()=>t,x:()=>a});var n=i(96540);const r={},o=n.createContext(r);function t(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);