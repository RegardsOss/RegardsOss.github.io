<!doctype html>
<html lang="fr" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/fr/blog/rss.xml" title="REGARDS Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fr/blog/atom.xml" title="REGARDS Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="REGARDS" href="/fr/opensearch.xml"><title data-react-helmet="true">REGARDS processing microservice | REGARDS</title><meta data-react-helmet="true" property="og:url" content="https://RegardsOss.github.io//fr/docs/development/backend/services/processing/overview/"><meta data-react-helmet="true" name="docsearch:language" content="fr"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="REGARDS processing microservice | REGARDS"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="shortcut icon" href="/fr/img/logos/regards-png/regards-favicon.png"><link data-react-helmet="true" rel="canonical" href="https://RegardsOss.github.io//fr/docs/development/backend/services/processing/overview/"><link data-react-helmet="true" rel="alternate" href="https://RegardsOss.github.io//docs/development/backend/services/processing/overview/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://RegardsOss.github.io//fr/docs/development/backend/services/processing/overview/" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://RegardsOss.github.io//docs/development/backend/services/processing/overview/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/fr/assets/css/styles.e8cf4ed8.css">
<link rel="preload" href="/fr/assets/js/styles.14df5a21.js" as="script">
<link rel="preload" href="/fr/assets/js/runtime~main.f1b10b19.js" as="script">
<link rel="preload" href="/fr/assets/js/main.348ce270.js" as="script">
<link rel="preload" href="/fr/assets/js/1.34cf6c09.js" as="script">
<link rel="preload" href="/fr/assets/js/2.ad6b0983.js" as="script">
<link rel="preload" href="/fr/assets/js/93dc8cdc.117fdcb2.js" as="script">
<link rel="preload" href="/fr/assets/js/2634.08b5e2a7.js" as="script">
<link rel="preload" href="/fr/assets/js/935f2afb.eedd5002.js" as="script">
<link rel="preload" href="/fr/assets/js/17896441.406df826.js" as="script">
<link rel="preload" href="/fr/assets/js/3d490464.a29cfbad.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Aller au contenu principal</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/fr/"><img src="/fr/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/fr/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">REGARDS</strong></a><a class="navbar__item navbar__link" href="/fr/docs/setup/">Installation</a><a class="navbar__item navbar__link" href="/fr/docs/user-guide/">Manuel</a><a class="navbar__item navbar__link navbar__link--active" href="/fr/docs/development/">Developpeurs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/fr/docs/setup/">1.5.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/fr/docs/development/backend/services/processing/overview/">1.5.0</a></li><li><a class="dropdown__link" href="/fr/docs/1.4.0/development/backend/processing/overview/">1.4.0</a></li><li><a class="dropdown__link" href="/fr/versions">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/fr/roadmap/">Roadmap</a><a class="navbar__item navbar__link" href="/fr/release-notes/">Release notes</a><a class="navbar__item navbar__link" href="/fr/aboutus/">A propos</a><a href="https://github.com/RegardsOss/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Chercher"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Chercher</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/fr/"><img src="/fr/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/fr/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">REGARDS</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/fr/docs/setup/">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/fr/docs/user-guide/">Manuel</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/fr/docs/development/">Developpeurs</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/fr/docs/development/backend/services/processing/overview/">1.5.0</a></li><li class="menu__list-item"><a class="menu__link" href="/fr/docs/1.4.0/development/backend/processing/overview/">1.4.0</a></li><li class="menu__list-item"><a class="menu__link" href="/fr/versions">All versions</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/fr/roadmap/">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/fr/release-notes/">Release notes</a></li><li class="menu__list-item"><a class="menu__link" href="/fr/aboutus/">A propos</a></li><li class="menu__list-item"><a href="https://github.com/RegardsOss/" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Ouvrir le menu latÃ©ral" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/fr/docs/development/">Development manual</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Backend</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Architecture</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/architecture/concepts/">Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/architecture/overview/">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Framework</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/getting-started/">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Starters</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Starters API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/amqp-monitoring/">AMQP monitoring starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/amqp/">AMQP starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/authentication/">Authentication starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/cloud/">Cloud starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/encryption/">Encryption starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/feign/">Feign starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/geojson/">GeoJSON starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/gson/">GSON starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/hateoas/">HATEOAS starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/jpa-instance/">JPA instance starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/jpa-multitenant/">JPA multitenant starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/microservice-core/">Microservice core starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/microservice/">Microservice starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/module/">Module starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/multitenant/">Multitenant starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/oais/">OAIS starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/plugins/">Plugins starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/security/">Security starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/staf/">STAF starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/swagger/">Swagger starter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/starters/web-socket/">Web socket starter</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/modules/jobs/">Jobs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/dev-microservice/">How to create a microservice</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/modules/plugins/">Plugins introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/dev-plugin/">How to create a plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/framework/plugins-api/">Plugins API</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Services</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/fr/docs/development/backend/services/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Authentication</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/authentication/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/authentication/api/">Authentication API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/authentication/plugins/">Authentication plugins</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Admin project</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/admin/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/admin/api/">Admin project API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Access project</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/access/overview/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/access/api/">Access project API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Catalog</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/catalog/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/catalog/search-api/">Search</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/catalog/service-plugins/">Catalog service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/catalog/search-engine-plugins/">Search engine</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/catalog/events/">Bus message events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Data management</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/api/access-rights/">Access rights</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/api/attachment/">Attachment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/api/collection/">Collection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/api/dataset/">Dataset</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/api/datasource/">Datasource</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/api/model/">Model</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/plugins/data-access-rights/">Data access rights</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/plugins/computed-attribute/">Computed attribute</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/plugins/datasource/">Datasource</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/events/">Bus message events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dam/geo/">Geospatial features management</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Feature manager</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/fem/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/fem/api/configuration/">Feature Manager configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/fem/api/rest/">Feature Manager REST</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/fem/api/amqp/">Feature Manager AMQP</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/fem/plugins/feature-factory/">Feature Factory</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Notifier</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/notifier/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/notifier/api/">Notifier</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/notifier/api/configuration/">Notifier configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/notifier/plugins/">Notifier</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Data provider</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dataprovider/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dataprovider/api/">Dataprovider</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dataprovider/plugins/post-processing/">Post processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dataprovider/plugins/product/">Product</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dataprovider/plugins/scan/">Scan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dataprovider/plugins/sip-generation/">SIP Generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/dataprovider/plugins/validation/">Validation</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Ingest</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/api/">Ingest</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/plugins/sip-pre-processing/">SIP pre processing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/plugins/sip-validation/">SIP validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/plugins/aip-generation/">AIP generation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/plugins/aip-tagging/">AIP tagging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/plugins/sip-post-processing/">SIP post processing</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/ingest/events/">Bus message events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Order</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/order/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/order/api/basket/">Basket</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/order/api/">Order</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Processing</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/fr/docs/development/backend/services/processing/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/processing/api/process/">Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/processing/api/batch/">Batch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/processing/api/monitoring/">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/processing/api/open/">Open</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/processing/plugins/">Processing</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Storage</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/storage/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/storage/api/">Storage</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/storage/plugins/allocation-strategy/">Allocation strategy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/storage/plugins/data-storage/">Data storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/storage/plugins/security-delegation/">Security delegation</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/backend/services/storage/events/">Bus message events</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Frontend</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/introduction/setup/">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/introduction/ide/">Setting up an IDE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/introduction/architecture/">Architecture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/introduction/eslint/">Lint</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/introduction/index/">Index</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/data/ui-data/">Data store &amp; Request</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/data/clients/">Backend interactions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">View</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/view/international/">Internationalization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/view/theme/">Theme</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/view/forms/">Forms</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/components/">Re-usable components</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Business components</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/business-components/">Overview - Business components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/business-components/microservice-plugin-configurator/">Microservice plugin configurator</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Lazy modules</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/">Overview - Lazy modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/authentication/">Authentication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/embedded-html/">Embedded HTML</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/licenses/">Licences</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/menu/">Menu</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/order-cart/">Order cart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/order-history/">Order history</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/project-about-page/">Project about page</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/project-list/">Project list</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/search-graph/">Search graph</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/search-results/">Search results</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/packages/lazy-modules/storage-monitoring/">Storage monitoring</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/plugins/">Plugins introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/plugins/criteria/">Criteria</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/plugins/service/">Services</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/frontend/configuration/layout/">Layout configuration</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/tutorials/overview/">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Appendices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/appendices/oais/">REGARDS OAIS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/appendices/lucene-query/">Lucene query format</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/fr/docs/development/appendices/create-model/">REGARDS XML Models format</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: 1.5.0</span></div><header><h1 class="docTitle_3a4h">REGARDS processing microservice</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Lien direct vers le titre">#</a></h2><p>The main reason for <code>Processing</code> is to apply treatments to ordered data files,
before they are served to the end user. However, this microservice has been
designed to be able to do more.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="processing-architecture"></a>Processing architecture<a class="hash-link" href="#processing-architecture" title="Lien direct vers le titre">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="domain-entities"></a>Domain entities<a class="hash-link" href="#domain-entities" title="Lien direct vers le titre">#</a></h3><p>There are five main entities introduced by <code>Processing</code>. Since their names are
rather generic and semantically overloaded, they are prefixed by a <code>P</code> referring
to the &quot;<code>P</code>&quot;rocessing context.</p><p> <img alt="Domain entities" src="/fr/assets/images/domain_entities-15d72851b1398dbf64bbc6abea400082.png"></p><p>Before describing each of the entities in more details, here is the very crude
idea behind this architecture:</p><ul><li>a <code>PProcess</code> describes a program to be run on data, the program can be configured
with parameters,</li><li>a <code>PBatch</code> describes a logical group of executions of a <code>PProcess</code>, providing
values for the program configuration parameters,</li><li>a <code>PExecution</code> describes the launch of the program on data, providing the actual
input files,</li><li>a <code>PInputFile</code> the description of a file to be used during an execution (it is
actually a glorified URL pointing to some data),  </li><li>a <code>PStep</code> is en event occuring during an execution (flagging the execution as
running, in success or in failure),</li><li>a <code>POutputFile</code> is a result of an execution, and may refer to the <code>PInputFile</code>s
which were used to build it.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pprocess"></a><code>PProcess</code><a class="hash-link" href="#pprocess" title="Lien direct vers le titre">#</a></h4><p>At the top of the abstraction hierarchy is the <code>PProcess</code>. A <code>PProcess</code> is the
abstract description of a procedure to be applied to one or many files.</p><p>The <code>PProcess</code> has several expected attribute:</p><ul><li>an UUID,</li><li>a name,</li><li>a set of metadata named the &quot;process info&quot;.</li></ul><p>It also provides more specific attributes:</p><ul><li>a size forecast, allowing to predict before launching execution, the expected
quantity of data outputted for a given input size,</li><li>a duration forecast, allowing to predict the expected duration of treatment,
allowing to compute a timeout duration for each execution,</li><li>a mapper from output to input, telling how to assign the corresponding inputs
to a given output,</li><li>validators for <code>PBatch</code> and <code>PExecution</code> creation using this <code>PProcess</code>,
allowing to decide in advance if the process may be used in a given context,</li><li>a workload engine and an executable, describing what and how to run the
corresponding program ; these mechanism will be explained below.</li></ul><p><code>PProcess</code> is an interface, and there is a default basic concrete class
<code>ConcretePProcess</code> implementing it as a simple POJO. However, any type of class
could implement <code>PProcess</code>, depending on the final application.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pbatch"></a><code>PBatch</code><a class="hash-link" href="#pbatch" title="Lien direct vers le titre">#</a></h3><p>A user has data to process, and has chosen a <code>PProcess</code> to treat them.
In order to launch treatments (also called executions), the user must
first acquire a <code>PBatch</code>, by calling the <code>Processing</code> service and providing:</p><ul><li>the <code>PProcess</code> configuration parameter values to be used by all executions</li><li>statistics regarding the quantity of data to treat.</li></ul><p>This allows the <code>Processing</code> service to decide whether the treatments
can be done or not. For instance, some configuration parameter values might
be wrong, or some quota of use may be reached. This validation is done
using the <code>PProcess</code> batch validator.</p><p>If the batch validator accepts the information, it delivers a <code>PBatch</code>
instance, saved in the <code>Processing</code> service database. This batch has:</p><ul><li>an ID,</li><li>a correlation ID given by the user when requesting the creation of the batch,
which will be provided for any execution result later,</li><li>the values for the <code>PProcess</code> parameters which will be used by all the
executions launched in the context of this batch.</li></ul><p>A batch is an immutable entity: it never changes once it has been created.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="abusing-batches-is-possible"></a>Abusing batches is possible<a class="hash-link" href="#abusing-batches-is-possible" title="Lien direct vers le titre">#</a></h4><p>Once the batch has been created and delivered to the user, the user may use
it and abuse it. Theere is for now no limitation of the number of executions
a user can do using the same batch ID. This limitation is not enforced because
sometimes, the input statistics provided at the batch creation may be
slightly inexact, and it is hard to predict in advance how many executions
will be needed to treat all the data. Instead of making bad heuristics,
the choice has been made to trust the user to not abuse the system, especially
since for now the only user for <code>Processing</code> is the <code>Order</code> service, which
has no interest in abusing batches.</p><p>However, if <code>Processing</code> had to be accessed directly by end users in the future,
it will require to enforce a more strict policy regarding the execution creation
within a given batch.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pexecution"></a><code>PExecution</code><a class="hash-link" href="#pexecution" title="Lien direct vers le titre">#</a></h3><p>When the user has received the batch response providing the batch ID, the
user can send execution request to <code>Processing</code>, using an AMQP
<code>PExecutionRequestEvent</code> message.</p><p>The execution request contains:</p><ul><li>the batch ID it corresponds to (determining the configuration parameters
for the <code>PProcess</code>),</li><li>the list of <code>PInputFile</code> to use as input data for this execution,</li><li>an execution correlation ID, which will be provided back when <code>Processing</code>
returns the execution result (as an AMQP <code>PExecutionResultEvent</code>).</li></ul><p>When the <code>Processing</code> service receives the request, it validates it using the
<code>PProcess</code> execution validator, and if accepted, saves it in the service
database and then runs it, using the <code>PProcess</code> executable and workload engine.</p><p>A <code>Pexecution</code> is a mutable entity: while running the executable, <code>PStep</code>s are
emmitted and added to the <code>PExecution</code>, providing a current status and last update
timestamp for the execution.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pinputfile"></a><code>PInputFile</code><a class="hash-link" href="#pinputfile" title="Lien direct vers le titre">#</a></h3><p>A <code>PInputFile</code> is an input file descriptor, defining:</p><ul><li>where the file is located using an URL,</li><li>the file size/content type/checksum,</li><li>a file-specific correlation ID, which will be used when reporting back
the execution result, allowing to map output files back to the input file
correlation IDs which were used to generate the output file.</li></ul><p>A <code>PInputFile</code> is an immutable entity.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pstep"></a><code>PStep</code><a class="hash-link" href="#pstep" title="Lien direct vers le titre">#</a></h3><p>While running in the context of an execution, the process-supplied <code>IExecutable</code>
has access to en event notifier, allowing to inform the <code>Processing</code> service
that steps have occurred in the execution.</p><p>A <code>PStep</code> is an immutable entity with the following fields:</p><ul><li>a status defining the type of step (RUNNING, SUCCESS, FAILURE, etc.).</li><li>an optional set of output files used if the step is final.</li></ul><p>An execution status can be transitory of final. Final statuses are:</p><ul><li>SUCCESS, </li><li>FAILURE, </li><li>and TIMED_OUT. </li></ul><p>Once a final status is reached, the execution is considered finished and
the <code>PExecutionResultEvent</code> is created and sent to the AMQP broker.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="poutputfile"></a><code>POutputFile</code><a class="hash-link" href="#poutputfile" title="Lien direct vers le titre">#</a></h3><p>When a <code>PStep</code> is final, it is supposed to contain a list of output results,
in the form of <code>POutputFile</code>s.</p><p>A <code>POutputFile</code> is, like the <code>PInputFile</code>, a wrapper around an URL. It has:</p><ul><li>an ID,</li><li>a reference to the corresponding execution UUID,</li><li>a file name, URL, size and checksum,</li><li>a list of optional <code>PInputFile</code> correlation IDs, allowing to make reference
to the input which generated this output.</li></ul><p>The <code>POutputFile</code> is mutable and also has a few technical flags:</p><ul><li><code>downloaded</code> tells if the file has been downloaded by the client,</li><li><code>deleted</code> tells if the file has been deleted and is not present for download anymore.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="general-algorithm"></a>General algorithm<a class="hash-link" href="#general-algorithm" title="Lien direct vers le titre">#</a></h2><p>Here is a description of the way a client needs to interact with <code>Processing</code> in order
to launch executions. (Only the &#x27;happy path&#x27; is represented.)</p><p><img alt="General &amp;#39;Happy Path&amp;#39; Algorithm" src="/fr/assets/images/general_algo-8d5685189a211455dc7fd9ab88b79462.png"></p><p>The client needs to interact first with the REST API in order to get the <code>PProcess</code>
details and then create a <code>PBatch</code>.</p><p>Then, the user needs to send <code>PExecution</code> requests events through AMQP.</p><p>The <code>Processing</code> service then launches the work using the workload engine for
the corresponding process, which launches an executable (provided by the process).</p><p>Running the executable generates steps, which are notified using a step notifier present
in the execution context which is given to the executable.</p><p>When the notifier receives a final step (step with a final <code>ExecutionStatus</code>), it
generates an execution result event sent back to the client though AMQP.</p><p>The final step contains references to the output files generated during the
execution. The user is free to download them by whichever means it has. Once
the download is done, the user notifies <code>Processing</code> through AMQP of the
downloaded files. <code>Processing</code> marks them as downloaded.</p><p>A scheduled service runs at a given periodicity to take all the output files
marked as downloaded, and delete them from the shared storage space where they
have been stored, and marks the output files as deleted in the database.</p><p>A scheduled service runs at a given periodicity to take all the batches for
which all the executions have been finished for a given duration, and deletes them
from the database. This deletion cascades to all the executions, steps, and output
files linked to this batch.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="technical-details"></a>Technical details<a class="hash-link" href="#technical-details" title="Lien direct vers le titre">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="workload-engine--executable--execution-context"></a>Workload engine / executable / execution context<a class="hash-link" href="#workload-engine--executable--execution-context" title="Lien direct vers le titre">#</a></h3><p>This section describes the why and how of the workload engine,
and the mechanism by which executables notify execution events.</p><p>The <code>Processing</code> service is an empty shell. It does not run the processes
itself, but delegates the running to the workload engine referenced by a <code>PProcess</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="generalities-on-workload-engines"></a>Generalities on workload engines<a class="hash-link" href="#generalities-on-workload-engines" title="Lien direct vers le titre">#</a></h4><p>The <code>WorkloadEngine</code> responsibility is then to define how the <code>IExecutable</code>
defined by the process will be launched (which could be synchronously,
in a separate thread, in a different virtual machine, etc.).
A <code>WorkloadEngine</code> is a way to abstract the running of processes. It is an
interface to frameworks like REGARDS jobs, Spring Batch, etc. whose purpose
is to launch programs on demand.</p><p>A <code>WorkloadEngine</code> instance has a name, and references itself when loaded
at bootstrap in a <code>WorkloadEngineRepository</code>. A <code>PProcess</code> will provide
the name of the engine it is supposed to run on.</p><p>When an execution of the <code>PProcess</code> is started, the service will load the
corresponding <code>WorkloadEngine</code>. For instance, in the case of the deployment
of <code>Processsing</code> for launching treatments on orders, the <code>WorkloadEngine</code> used
by all processes is for now based on REGARDS jobs. Launching an execution
with this engine is just creating a <code>LaunchingExecutionJob</code> as <code>QUEUED</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="executionevent"></a><code>ExecutionEvent</code><a class="hash-link" href="#executionevent" title="Lien direct vers le titre">#</a></h4><p>An execution event signifies that something happened during an execution.
The execution event contains an optional <code>PStep</code> (which may be final or not)
and an optional list of <code>POutputFiles</code>. The event can signify that a step
has been reached, or that output files have been generated, or both.</p><p>(In the context of the use of <code>Processing</code> for order data treatment, the
processes must send output files only along with a final step, but this
is a limitation given by the context of use, rather than a limitation of
the domain as it is designed.)</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="iexecutioneventnotifier"></a><code>IExecutionEventNotifier</code><a class="hash-link" href="#iexecutioneventnotifier" title="Lien direct vers le titre">#</a></h4><p>The <code>IExecutionEventNotifier</code> interface defines how to deal with events
sent during an execution. It is a simple functional interface which takes
as input an <code>ExecutionEvent</code> and returns a <code>Mono&lt;PExecution&gt;</code>
(with the steps potentially updated with the event step). (The <code>Mono</code> wrapper
signifies that a side-effect has been done during the execution, for instance
a modification of the execution in the database.)</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="executioncontext"></a><code>ExecutionContext</code><a class="hash-link" href="#executioncontext" title="Lien direct vers le titre">#</a></h4><p>An <code>ExecutionContext</code> provides access to:</p><ul><li>the <code>PProcess</code> and <code>PBatch</code> corresponding to the execution,</li><li>an <code>IExecutionEventNotifier</code>,</li><li>a mutable map of metadata.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="iexecutable"></a><code>IExecutable</code><a class="hash-link" href="#iexecutable" title="Lien direct vers le titre">#</a></h4><p>An <code>IExecutable</code> is a function which takes as input an <code>ExecutionContext</code> and
returns a <code>Mono&lt;ExecutionContext&gt;</code>. The <code>Mono</code> wrapper signifies that
side effects may occur. </p><p><code>IExecutable</code>s are simple functions which can be chained, allowing for
compositionality and modularity. Simple executable steps can be aggregated
into more complex executables.</p><p>These functions are meant to do side effects, and use the input <code>ExecutionContext</code>&#x27;s
event notifier, in order to advance steps or signify that outputs have been
generated. </p><p>An <code>IExecutable</code> is not supposed to know anything about the workload engine
that runs it, but it practise some information can be passed by the workload
engine to the executable through the <code>ExecutionContext</code> metadata.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reactive-first-service"></a>Reactive-first service<a class="hash-link" href="#reactive-first-service" title="Lien direct vers le titre">#</a></h3><p>The <code>Processing</code> microservice has been identified as a potential bottleneck
with heavy load. Because it might also be often prompted for monitoring
information, the choice has been made to make this microservice with a
reactive stack, using Spring Webflux and Netty as the backbone.</p><p>However, in the context of REGARDS, and because there is a lot of
security configuration inherited from REGARDS, the service can be
(and has been) configured to run in a servlet context, backed by Jetty.</p><p>It should be beneficial to the service to remain in a reactive-first
logic, especially in its domain core. The reactive model permeates throughout
the code in the form of function from values to <code>Mono</code>s and <code>Flux</code>es of
values. (Clean code often tends to leave such frameworks out of the
domain, but it is very hard to do so with Reactor ; especially since
the underlying interfaces do not discriminate between single-valued publishers
and multi-valued ones, and typing everything as <code>Publisher</code> is not helpful.)</p><p>As for the REST controllers, two versions are provided: a reactive and
a servlet one.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="clean-architecture"></a>Clean architecture<a class="hash-link" href="#clean-architecture" title="Lien direct vers le titre">#</a></h3><p>The <code>Processing</code> service is based on &#x27;Clean Architecture&#x27; principles.
This means that it has a domain core and several adapters, which abstract away
the different ways to interact with the external world.</p><p>The core defines:</p><ul><li>the base entities describes above,</li><li>the interfaces for services and repositories to manage the entities.</li></ul><p>The main adapters are:</p><ul><li>database access,</li><li>event handlers,</li><li>process management,</li><li>workload engine.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="database-access-adapter"></a>Database access adapter<a class="hash-link" href="#database-access-adapter" title="Lien direct vers le titre">#</a></h4><p>This adapter uses a reactive dirver (r2dbc) and is not destined to be reimplemented
for another context, unless there is a need to connect to something else than
postgresql.</p><p>In order to allow <code>Processing</code> to be run effectively in all contexts, and
in order to allow imitations on <code>PProcess</code>, the choice has been made to
use the reactive driver R2DBC to the database.</p><p>This allows to use <code>Processing</code> in a reactive context without suffering
from thread-blocking in database calls.</p><p>This has several consequences however:</p><ul><li>reactive drivers to databases are bad at relations, which is why the
database is de-normalized in several ways, attempts to re-normalize the
schema will involve performance costs, and need for way more requests
to the database,</li><li>there is a clean border between the domain layer and the data access layer,
meaning that there is a need for mapping domain entities to
database entities.</li></ul><p>In the database access layer, the objects corresponding to domain entities are
<code>BatchEntity</code>, <code>ExecutionEntity</code>, <code>StepEntity</code> (which is actually part of a JSON
field in <code>ExecutionEntity</code>) and <code>OutputFileEntity</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="event-handlers"></a>Event handlers<a class="hash-link" href="#event-handlers" title="Lien direct vers le titre">#</a></h4><p>This adapter uses AMQP event handlers reusing the REGARDS <code>IPublisher</code> and <code>IHandler</code>
interfaces. It is reusable as long as the mechanisms behind these interfaces
are available.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="process-management"></a>Process management<a class="hash-link" href="#process-management" title="Lien direct vers le titre">#</a></h4><p>This adapter uses REGARDS plugins as described below. It is not reusable in a
different context.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="workload-engine"></a>Workload engine<a class="hash-link" href="#workload-engine" title="Lien direct vers le titre">#</a></h4><p>This adapter uses REGARDS jobs as described below. It is not reusable in a
different context.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="order-specific-design-choices"></a><code>Order</code> specific design choices<a class="hash-link" href="#order-specific-design-choices" title="Lien direct vers le titre">#</a></h3><p>The <code>Processing</code> service has a domain core based on a reactive stack and a
clean code architecture. This allows the service to be used in many contexts,
however its main use is in conjunction with the <code>Order</code> service, in the
REGARDS context, and reusing several REGARDS functionalities. This means that
<code>Processing</code> is not used in reactive mode, but in servlet mode, in this context.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="orderprocessinfo-scope-and-cardinality"></a><code>OrderProcessInfo</code>, scope and cardinality<a class="hash-link" href="#orderprocessinfo-scope-and-cardinality" title="Lien direct vers le titre">#</a></h4><p>A <code>PProcess</code> provides a metadata key/value store, which provides free information
to the user. The author of the process can put any useful information for using
the process in this metadata.</p><p>In the case of processes used by <code>Order</code>, this process info is interpreted as
an <code>OrderProcessInfo</code> object, containing:</p><ul><li>limitations on the quantity of data accepted as input,</li><li>the list of required <code>DataType</code> files (for instance, if a process will be applicable
only on <code>RAWDATA</code> files, this list contains only <code>RAWDATA</code>),</li><li>the process size forecast, so that Order can pre-calculate an estimate of
the size of the output files</li><li>and two informations we will discuss in more details below: scope and cardinality.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="process-scope"></a>Process scope<a class="hash-link" href="#process-scope" title="Lien direct vers le titre">#</a></h5><p>The scope tells how to launch executions in the context of the same suborder.</p><p>The scope can be any of the two following values:</p><ul><li><code>FEATURE</code>: the process is designed to deal with one feature at a time, and thus
there will be one execution per feature in the suborder,</li><li><code>SUBORDER</code>: the process is designed to deal with several features at a time,
and there will be only one execution per suborder, with all the features given
as input.</li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="process-cardinality"></a>Process cardinality<a class="hash-link" href="#process-cardinality" title="Lien direct vers le titre">#</a></h5><p>The cardinality tells how many output files an execution will generate.</p><p>The cardinality can be any of the following values:</p><ul><li><p><code>ONE_PER_INPUT_FILE</code>: the process is designed to produce one output file
for each input file.</p><p>An example of such a process would be a process which produces a companion
file for each input file, providing information about the file content,
its size, etc.</p></li><li><p><code>ONE_PER_FEATURE</code>: the process is designed to produce one output file
for each feature present in the suborder (this has the same result as
<code>ONE_PER_INPUT_FILE</code> if there is only one input file per feature, for
instance if the process requires only the <code>RAWDATA</code> files and each feature
has only one <code>RAWDATA</code>),</p><p>An example of such a process would be to create a compressed archive
for each feature, each archive containing all the files associated
to the feature.</p></li><li><p><code>ONE_PER_EXECUTION</code>: the process is designed to produce only one output
file, no matter what its input is.</p><p>An example of such a process would be to take several images
and generate a superposition of all these images, or again producing
a compressed archive of all the files present in the input.</p></li></ul><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="scopecardinality-couples"></a>Scope/cardinality couples<a class="hash-link" href="#scopecardinality-couples" title="Lien direct vers le titre">#</a></h5><p>Since there are 2 scopes and 3 cardinalities, there are 6 possible
combinations, but not all of them are meaningful/useful, and there is
redundancy.</p><p>For instance, the couples:</p><ul><li><code>scope=FEATURE cardinality=ONE_PER_FEATURE</code> and</li><li><code>scope=FEATURE cardinality=ONE_PER_EXECUTION</code> </li></ul><p>have the same result: the scope says that there is one execution per feature,
so they result in the same behaviour.</p><p>The other couples are:</p><ul><li><code>scope=FEATURE cardinality=ONE_PER_INPUT_FILE</code>, which may often also
have the same behaviour as the couple above, if there is only one file
provided as input for each feature (which may be the case if the process
requires only the <code>RAWDATA</code> files as input),</li><li><code>scope=SUBORDER cardinality=ONE_PER_FEATURE</code> is useful if the process
is designed to treat features independently but has better performances
when grouping several executions, for instance because it has a big
overhead in its initialization,</li><li><code>scope=SUBORDER cardinality=ONE_PER_INPUT_FILE</code> is useful in the same
cases, but now there are several files per feature and they are treated
independently, </li><li><code>scope=SUBORDER cardinality=ONE_PER_EXECUTION</code> is useful if the process
is designed to aggregate information from several features ; however there
is for now no possibility to group features according to criteria in the
same suborder, so the process must accept any group of features.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="general-algorithm-of-orderprocessing-interaction"></a>General algorithm of Order/Processing interaction<a class="hash-link" href="#general-algorithm-of-orderprocessing-interaction" title="Lien direct vers le titre">#</a></h4><p>Here is a description of the way <code>Order</code> and <code>Processing</code> interact, leaving the
details of the <code>Processing</code> inner working out of the picture for more clarity.</p><p><img alt="Order and Processing interaction" src="/fr/assets/images/order_algo-9a097b89d03fb1a76195a4349796a307.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="process-definitions-are-regards-plugins"></a>Process definitions are REGARDS Plugins<a class="hash-link" href="#process-definitions-are-regards-plugins" title="Lien direct vers le titre">#</a></h4><p>In the context of the <code>Processing</code> service deployed in REGARDS along with the
<code>Order</code> service, where processes are used to post-process entity feature files,
processes are defined as REGARDS plugins, implementing the <code>IProcessDefinition</code>
interface.</p><p>These plugins need some configuration:</p><ul><li>allowed dataset for a process</li><li>allowed user role to use a process</li></ul><p>This extra information is stored in database as a wrapper for
<code>PluginConfiguration</code> named <code>RightsPluginConfiguration</code>. There is a specific
REST API for interacting with these wrappers, which are used by the
administrator.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="workload-engine-uses-regards-jobs"></a>Workload engine uses REGARDS Jobs<a class="hash-link" href="#workload-engine-uses-regards-jobs" title="Lien direct vers le titre">#</a></h4><p>The provided workload engine uses the REGARDS jobs mechanism. When the workload
engine is given an executable, it creates a QUEUED job for execution as soon
as possible.</p><p>By setting the <code>regards.jobs.pool.size</code> property, we can limit the number
of jobs running in parallel, and thus the number of process executions. This limits
the overall number of jobs, however, and thus does not permit to limit the number
of executions <em>per process</em>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuration"></a>Configuration<a class="hash-link" href="#configuration" title="Lien direct vers le titre">#</a></h2><p>The <code>Processing</code> service can be specifically configured with the following properties:</p><ul><li><p><code>regards.processing.sharedStorage.basePath</code>:</p><p> Path to a shared storage for processes which need it to store output files.</p><p> A process may be programmed to create output files anywhere accessible by an URL,
but the <code>Processing</code> service provides as a convenience a shared storage accessible
to all REGARDS modules needing to access output files, as a mount point in the
file system. This way, output files can be passed as <code>file</code> protocol URLs.
</p></li><li><p><code>regards.processing.executionWorkdir.basePath</code>:</p><p> Path to a file system directory where a folder is created for each execution.</p><p> For processes which may use them, as a convenience, the <code>Processing</code> service
provides utilities to create execution work directories. These execution workdirs
are created as file system children of this parameter&#x27;s value.
</p></li><li><p><code>regards.processing.r2dbc.host</code>:</p><p> Host to connect to the database.
</p></li><li><p><code>regards.processing.r2dbc.port</code>:</p><p> Port to connect to the database.
</p></li><li><p><code>regards.processing.r2dbc.username</code>:</p><p> Username to connect to the database.
</p></li><li><p><code>regards.processing.r2dbc.password</code>:</p><p> Password to connect to the database.
</p></li><li><p><code>regards.processing.r2dbc.dbname</code>:</p><p> Name of the database to connect to.
</p></li><li><p><code>regards.processing.r2dbc.schema</code>:</p><p> Schema of the database to connect to.
</p></li><li><p><code>regards.processing.outputfiles.cleanup.cron</code>:</p><p> Cron expression to look for downloaded output files and delete them.</p><p> Output files saved in the storage are cleaned up regularly.
This cron expression defines how often.
</p></li><li><p><code>regards.processing.executions.timedout.cleanup.cron</code>:</p><p> Cron expression to look for timed out executions.</p><p> When an execution is created, we use the duration forecast
of its parent process to determine an expected runtime duration.
This time is multiplied by two and saved in base.
At every trigger of this cron expression, we look for executions
that are still running after this saved duration, and declare
them as timed out. This puts them in a final state and notifies
the user of the time out. Users may choose to retry.
</p></li><li><p><code>regards.processing.cleanup.batch.age.ms</code>:</p><p> Minimum for old terminated batches selected for suppression.</p><p> Old batches, for which all executions are in a final state, are
regularly cleaned up. This property say how much time after the last
execution&#x27;s last update a batch is considered too old and
is selected for deletion.</p></li><li><p><code>regards.processing.cleanup.batch.rate.ms</code>:</p><p> How often we look for old batches to delete them.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="available-apis"></a>Available APIs<a class="hash-link" href="#available-apis" title="Lien direct vers le titre">#</a></h2><ul><li><a href="/fr/docs/development/backend/services/processing/api/process/">Process</a> : API to list/find existing processes</li><li><a href="/fr/docs/development/backend/services/processing/api/batch/">Batch</a> : API to create batches</li><li><a href="/fr/docs/development/backend/services/processing/api/monitoring/">Monitoring</a> : API to monitor existing executions</li><li><a href="/fr/docs/development/backend/services/processing/plugins/">Rights Plugin Configurations</a> : API to manage processes as plugins</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/RegardsOss/RegardsOss.github.io/edit/master/docs/development/backend/regards/processing/processing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Ã‰diter cette page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Pagination des documents"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/fr/docs/development/backend/services/order/api/"><div class="pagination-nav__sublabel">PrÃ©cÃ©dent</div><div class="pagination-nav__label">Â« REGARDS Order API</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/fr/docs/development/backend/services/processing/api/process/"><div class="pagination-nav__sublabel">Suivant</div><div class="pagination-nav__label">REGARDS Processing Process API Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#processing-architecture" class="table-of-contents__link">Processing architecture</a><ul><li><a href="#domain-entities" class="table-of-contents__link">Domain entities</a></li><li><a href="#pbatch" class="table-of-contents__link"><code>PBatch</code></a></li><li><a href="#pexecution" class="table-of-contents__link"><code>PExecution</code></a></li><li><a href="#pinputfile" class="table-of-contents__link"><code>PInputFile</code></a></li><li><a href="#pstep" class="table-of-contents__link"><code>PStep</code></a></li><li><a href="#poutputfile" class="table-of-contents__link"><code>POutputFile</code></a></li></ul></li><li><a href="#general-algorithm" class="table-of-contents__link">General algorithm</a></li><li><a href="#technical-details" class="table-of-contents__link">Technical details</a><ul><li><a href="#workload-engine--executable--execution-context" class="table-of-contents__link">Workload engine / executable / execution context</a></li><li><a href="#reactive-first-service" class="table-of-contents__link">Reactive-first service</a></li><li><a href="#clean-architecture" class="table-of-contents__link">Clean architecture</a></li><li><a href="#order-specific-design-choices" class="table-of-contents__link"><code>Order</code> specific design choices</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li><li><a href="#available-apis" class="table-of-contents__link">Available APIs</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container_grid_345B"><div class="col_1_18Mg"><p><strong>A framework and a set of plugins to build scientific archives.</strong></p><p>REGARDS is an Open Source data valorization product, highly flexible to various themes, modular, efficient, long-lasting, evolutionary and scalable, aims at providing services to Mission Centers and laboratories, and is able to deal with huge amount of data. <br>Our goal is to allow a strong commitment from user community in the development of modules and plugins.</p><p><strong>We welcome <a href="https://github.com/RegardsOss/RegardsOss.github.io/blob/master/CONTRIBUTING.md">your contributions</a> to make these documents better.</strong></p><div><img src="/img/logos/courbe-institutionnelle-signature_y110-inverser.png"></div></div><div class="col_2_1mR8"><h4 class="footer__title">Utilisateurs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/fr/docs/user-guide/">Manuel</a></li></ul></div><div class="col_2_1mR8"><h4 class="footer__title">DÃ©veloppeurs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/fr/docs/setup/">Installation</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/fr/docs/development/backend/architecture/concepts/">Backend</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/fr/docs/development/frontend/introduction/setup/">Frontend</a></li></ul></div><div class="col_2_1mR8"><h4 class="footer__title">Plus</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/RegardsOss/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 REGARDS, OSS. Built with Docusaurus.</div></div></footer></div>
<script src="/fr/assets/js/styles.14df5a21.js"></script>
<script src="/fr/assets/js/runtime~main.f1b10b19.js"></script>
<script src="/fr/assets/js/main.348ce270.js"></script>
<script src="/fr/assets/js/1.34cf6c09.js"></script>
<script src="/fr/assets/js/2.ad6b0983.js"></script>
<script src="/fr/assets/js/93dc8cdc.117fdcb2.js"></script>
<script src="/fr/assets/js/2634.08b5e2a7.js"></script>
<script src="/fr/assets/js/935f2afb.eedd5002.js"></script>
<script src="/fr/assets/js/17896441.406df826.js"></script>
<script src="/fr/assets/js/3d490464.a29cfbad.js"></script>
</body>
</html>