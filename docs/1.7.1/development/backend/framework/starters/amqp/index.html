<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.7.1 plugin-docs plugin-id-default docs-doc-id-development/backend/framework/starters/backend-framework-starters-amqp">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="search" type="application/opensearchdescription+xml" title="REGARDS" href="/opensearch.xml"><title data-rh="true">AMQP starter | REGARDS</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://RegardsOss.github.io//docs/1.7.1/development/backend/framework/starters/amqp/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.7.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.7.1"><meta data-rh="true" name="docsearch:version" content="1.7.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.7.1"><meta data-rh="true" property="og:title" content="AMQP starter | REGARDS"><meta data-rh="true" name="description" content="Purpose"><meta data-rh="true" property="og:description" content="Purpose"><link data-rh="true" rel="icon" href="/img/logos/regards-png/regards-favicon.png"><link data-rh="true" rel="canonical" href="https://RegardsOss.github.io//docs/1.7.1/development/backend/framework/starters/amqp/"><link data-rh="true" rel="alternate" href="https://RegardsOss.github.io//docs/1.7.1/development/backend/framework/starters/amqp/" hreflang="en"><link data-rh="true" rel="alternate" href="https://RegardsOss.github.io//docs/1.7.1/development/backend/framework/starters/amqp/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BP0ACDVAUR-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d1d73f56.css">
<link rel="preload" href="/assets/js/runtime~main.0a0ca18f.js" as="script">
<link rel="preload" href="/assets/js/main.840b91ff.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">REGARDS</b></a><a class="navbar__item navbar__link" href="/docs/1.7.1/setup/">Install</a><a class="navbar__item navbar__link" href="/docs/1.7.1/user-guide/">Manual</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/1.7.1/development/">Developers</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.7.1/setup/">1.7.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/development/backend/framework/starters/amqp/">1.8.1</a></li><li><a class="dropdown__link" href="/docs/1.8.0/development/backend/framework/starters/amqp/">1.8.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.7.1/development/backend/framework/starters/amqp/">1.7.1</a></li><li><a class="dropdown__link" href="/docs/1.6.0/development/backend/framework/starters/amqp/">1.6.0</a></li><li><a class="dropdown__link" href="/docs/1.5.0/development/backend/framework/starters/amqp/">1.5.0</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/roadmap/">Roadmap</a><a class="navbar__item navbar__link" href="/release-notes/">Release notes</a><a class="navbar__item navbar__link" href="/aboutus/">About us</a><a href="https://github.com/RegardsOss/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/1.7.1/development/">Development manual</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/1.7.1/development/backend/architecture/concepts/">Backend</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/1.7.1/development/backend/architecture/concepts/">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/1.7.1/development/backend/framework/getting-started/">Framework</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/getting-started/">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/">Starters</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/amqp-monitoring/">Starters API</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/amqp-monitoring/">AMQP monitoring starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/amqp/">AMQP starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/authentication/">Authentication starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/cloud/">Cloud starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/encryption/">Encryption starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/feign/">Feign starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/geojson/">GeoJSON starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/gson/">GSON starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/hateoas/">HATEOAS starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/jpa-instance/">JPA instance starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/jpa-multitenant/">JPA multitenant starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/microservice-core/">Microservice core starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/microservice/">Microservice starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/module/">Module starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/multitenant/">Multitenant starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/oais/">OAIS starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/plugins/">Plugins starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/security/">Security starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/staf/">STAF starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/swagger/">Swagger starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/starters/web-socket/">Web socket starter</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/modules/jobs/">Jobs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.7.1/development/backend/framework/dev-microservice/">How to create a microservice</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/1.7.1/development/backend/framework/modules/plugins/">Plugins</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/1.7.1/development/backend/services/overview/">Services</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.7.1/development/frontend/introduction/setup/">Frontend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.7.1/development/tutorials/overview/">Tutorials</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.7.1/development/appendices/oais/">Appendices</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->REGARDS<!-- --> <b>1.7.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/development/backend/framework/starters/amqp/">latest version</a></b> (<!-- -->1.8.1<!-- -->).</div></div><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Backend</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Framework</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Starters</span><meta itemprop="position" content="3"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Starters API</span><meta itemprop="position" content="4"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">AMQP starter</span><meta itemprop="position" content="5"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.7.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AMQP starter</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="purpose">Purpose<a class="hash-link" href="#purpose" title="Direct link to heading">​</a></h2><p>This starter is used to enable multitenant messaging.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><p>Add starter dependency to your POM (version depends on the BOM)</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">fr.cnes.regards.framework</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">amqp-regards-starter</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Business dependency</p><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">fr.cnes.regards.framework</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">groupId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">amqp-regards</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">artifactId</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(255, 85, 114)">dependency</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Dependency :</p><ul><li><a href="/docs/1.7.1/development/backend/framework/starters/multitenant/">Multitenant starter</a></li></ul><p>Prerequisites :</p><ul><li><strong>AMQP starter needs admin access on the server to manage virtual host</strong>. At the moment, it relies on <a href="https://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">RabbitMQ</a></li></ul><p>Properties :</p><div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># From multitenant starter, optional set of tenants to initialize at bootstrap during bean construction.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards.bootstrap-tenants=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># RabbitMQ host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.rabbitmq.host=localhost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># RabbitMQ port.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.rabbitmq.port=5672</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Property indicating the username used to connect and manage the broker, for the</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># AMQP starter, this user must have permissions to add virtual hosts and permissions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.rabbitmq.username=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Password of the user</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">spring.rabbitmq.password=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Virtual host management host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards.amqp.management.host=localhost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Virtual host management port</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards.amqp.management.port=15672</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Multitenancy messaging strategy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># SINGLE means that a single virtual host will share all messages from all tenants.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># MULTI means a virtual host is created for each tenant guaranteeing a total partitioning but increasing significantly memory and cpu consumption.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards.amqp.management.mode=SINGLE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Identification</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Microservice type identifier (used to restrict event cast)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># We advise you to use ${spring.application.name}.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards.amqp.microservice.type-identifier=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Microservice instance identifier (used for event broadcasting).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Must be unique by microservice type to ensure all instances will receive an event</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards.amqp.microservice.instance-identifier=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Enable AMQP transaction manager if no external transaction manager is available</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># This property is only useful if no {@link PlatformTransactionManager} is provided by a database or else.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards.amqp.internal.transaction=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="autoconfiguration">Autoconfiguration<a class="hash-link" href="#autoconfiguration" title="Direct link to heading">​</a></h2><p>Starter autoconfigures:</p><ul><li><code>IRabbitVirtualHostAdmin</code> to manage virtual hosts. Only RabbitMQ implementation exists at the moment.</li><li><code>IAmqpAdmin</code> to administrate the message broker(create queues, exchanges, bindings with proper names)</li><li><code>RabbitAdmin</code> to send and receive message from the right tenant using <code>MultitenantSimpleRoutingConnectionFactory</code></li><li><code>MultitenantSimpleRoutingConnectionFactory</code> to manage virtual host connections</li><li><code>AmqpEventHandler</code> to listen to tenant creation or deletion events</li></ul><p>For working with tenant messages or events :</p><ul><li><code>IPoller</code> responsible for any polling request from the message broker to the application. It is the bean to <code>Autowired</code> when you want to poll messages.</li><li><code>ISubscriber</code> responsible for any subscribing to the message broker. This is the bean to <code>Autowired</code> when you want to subscribe to an object.</li><li><code>IPublisher</code> responsible for any publishing from the application to the message broker. This is the bean to <code>Autowired</code> when you want to send messages to other microservices.</li></ul><p>For working with instance messages or events, you have to use <code>IInstancePoller</code>, <code>IInstanceSubscriber</code> and <code>IInstancePublisher</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to">How to<a class="hash-link" href="#how-to" title="Direct link to heading">​</a></h2><p>AMQP starter runs in a multitenant context so it relies on multitenant tenant resolution :</p><ul><li>A subscriber automatically subscribes to each tenant for an event using <code>ITenantResolver</code>.</li><li>A publisher automatically publishes an event on current tenant using <code>IRuntimeTenantResolver</code>.</li><li>A poller automatically polls an event on current tenant using <code>IRuntimeTenantResolver</code>.</li></ul><p>Elements below are used to describe AMQP functionalities in following schemas.</p><p><img loading="lazy" alt="AMQP legend" src="data:image/png;base64,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" width="397" height="142" class="img_ev3q"></p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Queue names are generated using microservice identification properties when required where</p><ul><li><strong>µs</strong> is equivalent to microservice identifier property.</li><li><strong>µsi</strong> is equivalent to microservice instance identifier property.</li></ul></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-publish-a-message">How to publish a message<a class="hash-link" href="#how-to-publish-a-message" title="Direct link to heading">​</a></h3><p>To publish a message on the broker, you have to use the <code>IPublisher</code> interface and its <code>publish</code> methods.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="broadcast-a-subscribable-message">Broadcast a subscribable message<a class="hash-link" href="#broadcast-a-subscribable-message" title="Direct link to heading">​</a></h4><p>First, create the message (i.e. a simple POJO) implementing <code>ISubscribable</code>.
Annotate this message with <code>@Event</code> and define the event <strong>target</strong> (see below).</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Queue whose name is built with a microservice instance identifier is not totally safe. Indeed, if the corresponding microservice instance is stopped and never restarted, queue may not be consumed anymore and its messages lost. Be sure to be resilient with these types of messages!</p></div></div><p><img loading="lazy" alt="Broadcast message" src="/assets/images/amqp_tuto_subscription_broadcast-8777640d9606e963d4a58de869fa2627.png" width="1049" height="500" class="img_ev3q"></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Event(target = Target.ALL)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class HelloMessage implements ISubscribable {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then publish the message :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private IPublisher publisher;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void publishHello() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   HelloMessage message = new HelloMessage();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   publisher.publish(message);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unicast-a-subscribable-message">Unicast a subscribable message<a class="hash-link" href="#unicast-a-subscribable-message" title="Direct link to heading">​</a></h4><p>Create the message implementing <code>ISubscribable</code>.
Annotate this message with <code>@Event</code>, set mode to <strong>UNICAST</strong> and define the event <strong>target</strong> (see below).</p><p><img loading="lazy" alt="Unicast message" src="/assets/images/amqp_tuto_subscription_unicast-d46945f1c71fce61ce5de7fc79912501.png" width="998" height="328" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="working-message-unicast">Working message (unicast)<a class="hash-link" href="#working-message-unicast" title="Direct link to heading">​</a></h4><p>Working message is stored in a working queue and is consumed synchronously on-demand.</p><p>First, create the message implementing <code>IPollable</code>.
Annotate this message with <code>@Event</code> and define the event <strong>target</strong> (see below).</p><p><img loading="lazy" alt="Worker queue" src="/assets/images/amqp_tuto_worker_queues-f42a848868b6347ffeec72719c14ff20.png" width="994" height="322" class="img_ev3q"></p><p><strong>A message is only handled by a single poller (i.e. worker).</strong></p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Event(target = Target.ALL)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class PollMessage implements IPollable {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then publish the message :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private IPublisher publisher;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void publishHello() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   PollMessage message = new PollMessage();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   publisher.publish(message);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p><code>IPublish</code> manages <strong>message priority</strong>. Just define the priority in the publish method.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-subscribe-to-a-subscribable-message">How to subscribe to a subscribable message<a class="hash-link" href="#how-to-subscribe-to-a-subscribable-message" title="Direct link to heading">​</a></h3><p>To subscribe to a message, you have to use the <code>ISubscriber</code> interface and its <code>subscribeTo</code> method.</p><p>First, create a message handler implementing <code>IHandler</code> to listen to the message:</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class HelloHandler implements IHandler&lt;HelloMessage&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public void handle(TenantWrapper&lt;HelloMessage&gt; wrapper) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // Retrieve your message from tenant wrapper</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      HelloMessage message = wrapper.getContent();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // Do something</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then subscribe to the message :</p><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private ISubscriber subscriber;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void subscribeToHello() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   subscriber.subscribeTo(HelloMessage.class, new HelloHandler());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can stop listener using <code>unsubscribeFrom</code> method.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-poll-a-pollable-message">How to poll a pollable message<a class="hash-link" href="#how-to-poll-a-pollable-message" title="Direct link to heading">​</a></h3><p>To poll a message, you have to use the <code>IPoller</code> interface and its <code>poll</code> method.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Polling process requires a tenant! So before polling, you must guarantee a tenant is properly set.</p></div></div><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Autowired</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private IPoller poller;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public void simplePollMessage() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  TenantWrapper&lt;PollMessage&gt; wrapper = poller.poll(PollMessage.class);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // Do something with the message</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction">Transaction<a class="hash-link" href="#transaction" title="Direct link to heading">​</a></h3><p>Transaction is supported through classic Spring <code>Transactional</code> annotation.</p><p>If en error occurs in a transaction, a message to publish won&#x27;t be published, a pollable or subscribable message will be unacked and turn back to its queue.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="external-transaction">External transaction<a class="hash-link" href="#external-transaction" title="Direct link to heading">​</a></h4><p>If a <code>PlatformTransactionManager</code> is on the classpath, AMQP will automatically synchronize its behaviour with an existing transaction.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="internal-transaction">Internal transaction<a class="hash-link" href="#internal-transaction" title="Direct link to heading">​</a></h4><p>If no external <code>PlatformTransactionManager</code> exists, you can enable internal one with related property.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="constraints-on-the-use-of-rabbitmq">Constraints on the use of RabbitMQ<a class="hash-link" href="#constraints-on-the-use-of-rabbitmq" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="namespace">Namespace<a class="hash-link" href="#namespace" title="Direct link to heading">​</a></h3><p>All virtual hosts defined and used by REGARDS are prefixed by &quot;regards&quot;.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="purpose-of-amqp-client">Purpose of AMQP client<a class="hash-link" href="#purpose-of-amqp-client" title="Direct link to heading">​</a></h3><p>The only purpose of the AMQP client is to handle the multi tenancy communication with the message broker. That means creating virtual hosts on the broker dynamically to ensure that each tenant&#x27;s communications are isolated from the others. Therefore, the user used by the application to interact with RabbitMQ has to have privileges to create and modify virtual hosts.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-1.7.1/development/backend/framework/starters/amqp-starter.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.7.1/development/backend/framework/starters/amqp-monitoring/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">AMQP monitoring starter</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.7.1/development/backend/framework/starters/authentication/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Authentication starter</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#autoconfiguration" class="table-of-contents__link toc-highlight">Autoconfiguration</a></li><li><a href="#how-to" class="table-of-contents__link toc-highlight">How to</a><ul><li><a href="#how-to-publish-a-message" class="table-of-contents__link toc-highlight">How to publish a message</a></li><li><a href="#how-to-subscribe-to-a-subscribable-message" class="table-of-contents__link toc-highlight">How to subscribe to a subscribable message</a></li><li><a href="#how-to-poll-a-pollable-message" class="table-of-contents__link toc-highlight">How to poll a pollable message</a></li><li><a href="#transaction" class="table-of-contents__link toc-highlight">Transaction</a></li></ul></li><li><a href="#constraints-on-the-use-of-rabbitmq" class="table-of-contents__link toc-highlight">Constraints on the use of RabbitMQ</a><ul><li><a href="#namespace" class="table-of-contents__link toc-highlight">Namespace</a></li><li><a href="#purpose-of-amqp-client" class="table-of-contents__link toc-highlight">Purpose of AMQP client</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container_grid_bQnQ"><div class="col_1_KTIr"><p><strong>A framework and a set of plugins to build scientific archives.</strong></p><p>REGARDS is an Open Source data valorization product, highly flexible to various themes, modular, efficient, long-lasting, evolutionary and scalable, aims at providing services to Mission Centers and laboratories, and is able to deal with huge amount of data. <br>Our goal is to allow a strong commitment from user community in the development of modules and plugins.</p><p><strong>We welcome <a href="https://github.com/RegardsOss/RegardsOss.github.io/blob/master/CONTRIBUTING.md">your contributions</a> to make these documents better.</strong></p><div><img src="/img/logos/courbe-institutionnelle-signature_y110-inverser.png"></div></div><div class="col_2_Jonb"><h4 class="footer__title">Users</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/user-guide/">Manual</a></li></ul></div><div class="col_2_Jonb"><h4 class="footer__title">Developpers</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/setup/">Install</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/development/backend/architecture/concepts/">Backend</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/development/frontend/introduction/setup/">Frontend</a></li></ul></div><div class="col_2_Jonb"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/RegardsOss/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 REGARDS, OSS. Built with Docusaurus.</div></div></footer></div>
<script src="/assets/js/runtime~main.0a0ca18f.js"></script>
<script src="/assets/js/main.840b91ff.js"></script>
</body>
</html>