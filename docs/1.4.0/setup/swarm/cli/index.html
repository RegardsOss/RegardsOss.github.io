<!doctype html>
<html class="docs-version-1.4.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="search" type="application/opensearchdescription+xml" title="REGARDS" href="/opensearch.xml"><title data-react-helmet="true">REGARDS Command line interface | REGARDS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://RegardsOss.github.io//docs/1.4.0/setup/swarm/cli/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="1.4.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-1.4.0"><meta data-react-helmet="true" property="og:title" content="REGARDS Command line interface | REGARDS"><meta data-react-helmet="true" name="description" content="REGARDS stack Administration tools"><meta data-react-helmet="true" property="og:description" content="REGARDS stack Administration tools"><link data-react-helmet="true" rel="shortcut icon" href="/img/logos/regards-png/regards-favicon.png"><link data-react-helmet="true" rel="canonical" href="https://RegardsOss.github.io//docs/1.4.0/setup/swarm/cli/"><link data-react-helmet="true" rel="alternate" href="https://RegardsOss.github.io//docs/1.4.0/setup/swarm/cli/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://RegardsOss.github.io//fr/docs/1.4.0/setup/swarm/cli/" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://RegardsOss.github.io//docs/1.4.0/setup/swarm/cli/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.44a6b6c9.css">
<link rel="preload" href="/assets/js/runtime~main.c6ce1cdc.js" as="script">
<link rel="preload" href="/assets/js/main.1e2fa172.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logos/regards-svg/regards-white.svg" alt="Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">REGARDS</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/1.4.0/setup/">Install</a><a class="navbar__item navbar__link" href="/docs/1.4.0/user-guide/">Manual</a><a class="navbar__item navbar__link" href="/docs/1.4.0/development/">Developers</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/1.4.0/setup/">1.4.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/setup/swarm/cli/">1.6.0</a></li><li><a class="dropdown__link" href="/docs/1.5.0/setup/swarm/cli/">1.5.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/1.4.0/setup/swarm/cli/">1.4.0</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div><a class="navbar__item navbar__link" href="/roadmap/">Roadmap</a><a class="navbar__item navbar__link" href="/release-notes/">Release notes</a><a class="navbar__item navbar__link" href="/aboutus/">About us</a><a href="https://github.com/RegardsOss/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Installation - Docker Swarm</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/setup/">Quick setup</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.4.0/setup/swarm/cli/">Administration</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/setup/ansible-tasks/">Ansible playbook tasks</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.4.0/setup/swarm/advanced-setup/">Advanced setup</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for REGARDS <b>1.4.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/setup/swarm/cli/">latest version</a></b> (1.6.0).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: 1.4.0</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>REGARDS Command line interface</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="regards-stack-administration-tools"></a>REGARDS stack Administration tools<a class="hash-link" href="#regards-stack-administration-tools" title="Direct link to heading">#</a></h2><p>Connect to the master node of your stack, and open the REGARDS working directory.<br>
To do that, you need these two values from your inventories :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">group_workdir_local</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /opt/regards/</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">group_stack_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;regards-cnes&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It means your stack is installed inside <code>/opt/regards/regards-cnes</code>.</p><p>Open this folder and go to the cli folder:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token builtin class-name" style="color:rgb(255, 203, 107)">cd</span><span class="token plain"> /opt/regards/regards-cnes/cli</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Let&#x27;s look at these scripts :</p><ul><li><code>exec.sh</code>: let you go inside a running container. For advanced debugging.</li><li><code>logs.sh</code>: let you display container logs from a running container. Once the stack is running fine, you should prefer to use Kibana to see logs</li><li><code>reboot.sh</code>: let you reboot a container</li><li><code>status.sh</code>: display the status of your stack (running container, how many containers are missing, history)</li><li><code>deploy.sh</code>: boot or update the stack using stack files. It checks for updated images on the Docker registry, and track updates on files available on the master node.</li><li><code>update.sh</code>: let you fetch an updated docker image and reboot only that single container. For advanced usage, you should prefer <code>deploy.sh</code>.</li><li><code>shutdown.sh</code> : let you completly shutdown the regards swarm stack.</li><li><code>health.sh</code> : let you retrieve microservices global heathness for a specific tenant.</li></ul><p>When you deploy the stack, you should run <code>status.sh</code> to see if containers are running:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">HISTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> PREVIOUS CONTAINERS</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nothing found </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> stack: regards-cnes</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">RUNNING</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain">/25</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ID      NAME                                               IMAGE                                            NODE                                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">  CURRENT STATE      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">86</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-fluent.w4pf3rfr47yjny8y2jmvy9n0s   myregistry/regards-fluent:latest              regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-fluent.jh7i65fsxbrnce85yjexucna3   myregistry/regards-fluent:latest              regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">77</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-fluent.iodt1aszolajpqq5f12q12v1w   myregistry/regards-fluent:latest              regards-cnes-d11.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ij</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-admin.1                            myregistry/rs-administration:V1.1.0           regards-cnes-d11.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-postgres.1                         myregistry/regards-database:latest            regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">vm</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-phppgadmin.1                       myregistry/regards-phpmyadmin:latest          regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">59</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-notifier.1                         myregistry/rs-notifier:V1.1.0                 regards-cnes-d11.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3r</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-logs-elasticsearch.1               myregistry/regards-elasticsearch:latest       regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">jd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-kibana.1                           myregistry/regards-kibana:latest              regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">3t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-dam.1                              myregistry/rs-dam:V1.1.0                      regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-access-instance.1                  myregistry/rs-access-instance:V1.1.0          regards-cnes-d11.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-fem.1                              myregistry/rs-fem:V1.1.0                      regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">lx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-config.1                           myregistry/rs-config:V1.1.0                   regards-cnes-d11.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2k</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-authentication.1                   myregistry/rs-authentication:V1.1.0           regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-catalog.1                          myregistry/rs-catalog:V1.1.0                  regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">qu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-registry.1                         myregistry/rs-registry:V1.1.0                 regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">8m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-rabbitmq.1                         myregistry/regards-messaging:latest           regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">n9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-maildev.1                          myregistry/regards-maildev:latest             regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">m8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-logs-kibana.1                      myregistry/regards-kibana:latest              regards-cnes-d12.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ke</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-elasticsearch.1                    myregistry/regards-elasticsearch:latest       regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">kw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-access-project.1                   myregistry/rs-access-project:V1.1.0           regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">51</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-gateway.1                          myregistry/rs-gateway:V1.1.0                  regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">jd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-front.1                            myregistry/rs-front:V1.1.0                    regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">y4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">    regards-cnes_rs-admin-instance.1                   myregistry/rs-administration-instance:V1.1.0  regards-cnes-d13.myorganisation.com      Running </span><span class="token number" style="color:rgb(247, 140, 108)">23</span><span class="token plain"> hours ago</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the history, there is no container starting again and again every minutes. That&#x27;s what we&#x27;re expecting in a production environment.<br>
Moreover, we display the number of running containers and the number of expected ones. In this exemple everything is fine (<code>[RUNNING]	25/25</code>).
The current state of these containers is also important. You need to wait 5 to 15 minutes to see if containers succeed to boot, some containers are waiting to others so they usually crash in that short period if there is some files unwritable, COTS not accessible...</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>The number of running services depends of your inventory. You may see less actives services than this exemple, but the <code>[RUNNING]	X/X</code> must equals 100%.</p></div></div><p>You can run the script <code>health.sh</code> to check the healthness returned by each microservice of the stack, for a specfic tenant.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./health.sh demo</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   fem</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   admin</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   dam</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   processing</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   storage</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   authentication</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   ingest</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   admin_instance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   access</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   catalog</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   access_instance</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   order</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   dataprovider</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   notifier</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><blockquote><p>The microservice healthness is still in a early access and not heavily tested.</p></blockquote></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="simple-debugging"></a>Simple debugging<a class="hash-link" href="#simple-debugging" title="Direct link to heading">#</a></h2><p>Now, let&#x27;s see how you can debug some microservice.
First, let&#x27;s remove the elasticsearch:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">docker </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> scale regards-cnes_rs-elasticsearch</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then, reboot dam:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./reboot.sh rs-dam</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now we can read logs of the booting dam to see if it succeed to boot without ElasticSearch :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$./logs.sh rs-dam -f</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards-cnes_rs-dam.1.w5gxg6x1mn2x@regards-cnes-d13.myorganisation.com    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-05-12 </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain">:49:54,315 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">rs-dam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">main            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> ERROR o.s.boot.SpringApplication </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">    - Application run failed</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">regards-cnes_rs-dam.1.w5gxg6x1mn2x@regards-cnes-d13.myorganisation.com    </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Caused by: java.net.UnknownHostException: rs-elasticsearch: Try again</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Definitly, it doesn&#x27;t like it. Now we can restart the ElasticSearch by just running :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./deploy.sh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Now we can run again <code>status.sh</code> :</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ./status.sh </span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">HISTORY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> PREVIOUS CONTAINERS</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ID      NAME                                               IMAGE                                                                     NODE                                  DESIRED STATE CURRENT STATE </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">86m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">   regards-cnes_rs-fluent.w4pf3rfr47yjny8y2jmvy9n0s   myregistry/regards-fluent:latest@sha256:4e733e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">      regards-cnes-d12.myorganisation.com   Shutdown      Shutdown </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> minutes ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nhu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">   regards-cnes_rs-fluent.jh7i65fsxbrnce85yjexucna3   myregistry/regards-fluent:latest@sha256:4e733e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">      regards-cnes-d13.myorganisation.com   Shutdown      Shutdown </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> minutes ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">778</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">   regards-cnes_rs-fluent.iodt1aszolajpqq5f12q12v1w   myregistry/regards-fluent:latest@sha256:4e733e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">      regards-cnes-d11.myorganisation.com   Shutdown      Shutdown </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> minutes ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ty0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">   regards-cnes_rs-authentication.1                   myregistry/rs-authentication:V1.1.0@sha256:875ca2aa</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">  regards-cnes-d13.myorganisation.com   Shutdown      Shutdown </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> minute ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">7yw</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">   regards-cnes_rs-access-project.1                   myregistry/rs-access-project:V1.1.0@sha256:17a0d7e9</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">  regards-cnes-d13.myorganisation.com   Shutdown      Shutdown </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> minute ago</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">RUNNING</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain">/25</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We see in the history the last activity starts to be old (2 mins) and there is again 25/25 services deployed.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/RegardsOss/RegardsOss.github.io/edit/master/versioned_docs/version-1.4.0/setup/swarm-cli.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/1.4.0/setup/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Quick setup</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/1.4.0/setup/ansible-tasks/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ansible playbook tasks Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#regards-stack-administration-tools" class="table-of-contents__link">REGARDS stack Administration tools</a></li><li><a href="#simple-debugging" class="table-of-contents__link">Simple debugging</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container_grid_345B"><div class="col_1_18Mg"><p><strong>A framework and a set of plugins to build scientific archives.</strong></p><p>REGARDS is an Open Source data valorization product, highly flexible to various themes, modular, efficient, long-lasting, evolutionary and scalable, aims at providing services to Mission Centers and laboratories, and is able to deal with huge amount of data. <br>Our goal is to allow a strong commitment from user community in the development of modules and plugins.</p><p><strong>We welcome <a href="https://github.com/RegardsOss/RegardsOss.github.io/blob/master/CONTRIBUTING.md">your contributions</a> to make these documents better.</strong></p><div><img src="/img/logos/courbe-institutionnelle-signature_y110-inverser.png"></div></div><div class="col_2_1mR8"><h4 class="footer__title">Users</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/user-guide/">Manual</a></li></ul></div><div class="col_2_1mR8"><h4 class="footer__title">Developpers</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/setup/">Install</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/development/backend/architecture/concepts/">Backend</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="/docs/development/frontend/introduction/setup/">Frontend</a></li></ul></div><div class="col_2_1mR8"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/RegardsOss/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 REGARDS, OSS. Built with Docusaurus.</div></div></footer></div>
<script src="/assets/js/runtime~main.c6ce1cdc.js"></script>
<script src="/assets/js/main.1e2fa172.js"></script>
</body>
</html>